var Xe=Object.defineProperty;var _e=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var me=(l,e,i)=>e in l?Xe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,ne=(l,e)=>{for(var i in e||(e={}))Ye.call(e,i)&&me(l,i,e[i]);if(_e)for(var i of _e(e))et.call(e,i)&&me(l,i,e[i]);return l};const tt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};tt();function x(){}function nt(l,e){for(const i in e)l[i]=e[i];return l}function He(l){return l()}function ge(){return Object.create(null)}function K(l){l.forEach(He)}function ae(l){return typeof l=="function"}function j(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function lt(l){return Object.keys(l).length===0}function it(l,e,i,t){if(l){const n=Fe(l,e,i,t);return l[0](n)}}function Fe(l,e,i,t){return l[1]&&t?nt(i.ctx.slice(),l[1](t(e))):i.ctx}function rt(l,e,i,t){if(l[2]&&t){const n=l[2](t(i));if(e.dirty===void 0)return n;if(typeof n=="object"){const s=[],r=Math.max(e.dirty.length,n.length);for(let o=0;o<r;o+=1)s[o]=e.dirty[o]|n[o];return s}return e.dirty|n}return e.dirty}function st(l,e,i,t,n,s){if(n){const r=Fe(e,i,t,s);l.p(r,n)}}function ot(l){if(l.ctx.length>32){const e=[],i=l.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function m(l,e){l.appendChild(e)}function v(l,e,i){l.insertBefore(e,i||null)}function w(l){l.parentNode.removeChild(l)}function I(l,e){for(let i=0;i<l.length;i+=1)l[i]&&l[i].d(e)}function $(l){return document.createElement(l)}function b(l){return document.createTextNode(l)}function D(){return b(" ")}function R(){return b("")}function ce(l,e,i,t){return l.addEventListener(e,i,t),()=>l.removeEventListener(e,i,t)}function y(l,e,i){i==null?l.removeAttribute(e):l.getAttribute(e)!==i&&l.setAttribute(e,i)}function at(l){return Array.from(l.childNodes)}function V(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}let ue;function G(l){ue=l}const F=[],re=[],X=[],pe=[],ct=Promise.resolve();let se=!1;function ut(){se||(se=!0,ct.then(Ge))}function oe(l){X.push(l)}const le=new Set;let Q=0;function Ge(){const l=ue;do{for(;Q<F.length;){const e=F[Q];Q++,G(e),ft(e.$$)}for(G(null),F.length=0,Q=0;re.length;)re.pop()();for(let e=0;e<X.length;e+=1){const i=X[e];le.has(i)||(le.add(i),i())}X.length=0}while(F.length);for(;pe.length;)pe.pop()();se=!1,le.clear(),G(l)}function ft(l){if(l.fragment!==null){l.update(),K(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(oe)}}const Y=new Set;let C;function E(){C={r:0,c:[],p:C}}function N(){C.r||K(C.c),C=C.p}function p(l,e){l&&l.i&&(Y.delete(l),l.i(e))}function h(l,e,i,t){if(l&&l.o){if(Y.has(l))return;Y.add(l),C.c.push(()=>{Y.delete(l),t&&(i&&l.d(1),t())}),l.o(e)}}function L(l){l&&l.c()}function U(l,e,i,t){const{fragment:n,on_mount:s,on_destroy:r,after_update:o}=l.$$;n&&n.m(e,i),t||oe(()=>{const a=s.map(He).filter(ae);r?r.push(...a):K(a),l.$$.on_mount=[]}),o.forEach(oe)}function z(l,e){const i=l.$$;i.fragment!==null&&(K(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function _t(l,e){l.$$.dirty[0]===-1&&(F.push(l),ut(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function B(l,e,i,t,n,s,r,o=[-1]){const a=ue;G(l);const c=l.$$={fragment:null,ctx:null,props:s,update:x,not_equal:n,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ge(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=i?i(l,e.props||{},(_,f,...d)=>{const g=d.length?d[0]:f;return c.ctx&&n(c.ctx[_],c.ctx[_]=g)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](g),u&&_t(l,_)),f}):[],c.update(),u=!0,K(c.before_update),c.fragment=t?t(c.ctx):!1,e.target){if(e.hydrate){const _=at(e.target);c.fragment&&c.fragment.l(_),_.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&p(l.$$.fragment),U(l,e.target,e.anchor,e.customElement),Ge()}G(a)}class O{$destroy(){z(this,1),this.$destroy=x}$on(e,i){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(i),()=>{const n=t.indexOf(i);n!==-1&&t.splice(n,1)}}$set(e){this.$$set&&!lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function de(l){let e,i;const t=l[5].default,n=it(t,l,l[4],null);return{c(){e=$("div"),n&&n.c(),y(e,"class","window-content svelte-1qojbbx")},m(s,r){v(s,e,r),n&&n.m(e,null),i=!0},p(s,r){n&&n.p&&(!i||r&16)&&st(n,t,s,s[4],i?rt(t,s[4],r,null):ot(s[4]),null)},i(s){i||(p(n,s),i=!0)},o(s){h(n,s),i=!1},d(s){s&&w(e),n&&n.d(s)}}}function mt(l){let e,i,t,n,s,r,o,a,c,u,_,f=!l[2]&&de(l);return{c(){e=$("div"),i=$("div"),t=$("div"),n=b(l[0]),s=D(),r=$("div"),r.innerHTML=`<span>-</span> 
            <span>x</span>`,o=D(),f&&f.c(),y(r,"class","window-icons svelte-1qojbbx"),y(i,"class","window-titlebar svelte-1qojbbx"),y(e,"class",a="window "+(l[1]?"window-grow":"")+" svelte-1qojbbx")},m(d,g){v(d,e,g),m(e,i),m(i,t),m(t,n),m(i,s),m(i,r),m(e,o),f&&f.m(e,null),c=!0,u||(_=ce(i,"click",l[3]),u=!0)},p(d,[g]){(!c||g&1)&&V(n,d[0]),d[2]?f&&(E(),h(f,1,1,()=>{f=null}),N()):f?(f.p(d,g),g&4&&p(f,1)):(f=de(d),f.c(),p(f,1),f.m(e,null)),(!c||g&2&&a!==(a="window "+(d[1]?"window-grow":"")+" svelte-1qojbbx"))&&y(e,"class",a)},i(d){c||(p(f),c=!0)},o(d){h(f),c=!1},d(d){d&&w(e),f&&f.d(),u=!1,_()}}}function gt(l,e,i){let{$$slots:t={},$$scope:n}=e,{title:s=""}=e,{grow:r=!1}=e,o=!1;const a=()=>{i(2,o=!o)};return l.$$set=c=>{"title"in c&&i(0,s=c.title),"grow"in c&&i(1,r=c.grow),"$$scope"in c&&i(4,n=c.$$scope)},[s,r,o,a,n,t]}class W extends O{constructor(e){super(),B(this,e,gt,mt,j,{title:0,grow:1})}}const q={messages:[""],callbacks:[]};function A(l){const e=l.split(`
`);for(let i in e){const t=e[i];q.messages[q.messages.length-1]+=t,i<e.length-1&&q.messages.push("")}for(let i of q.callbacks)i(q)}function pt(){return q}function dt(l){q.callbacks.push(l)}function he(l,e,i){const t=l.slice();return t[4]=e[i],t}function be(l){let e,i=l[4]+"",t,n;return{c(){e=$("div"),t=b(i),n=D(),y(e,"class","log-message svelte-1f4e2ec")},m(s,r){v(s,e,r),m(e,t),m(e,n)},p(s,r){r&1&&i!==(i=s[4]+"")&&V(t,i)},d(s){s&&w(e)}}}function ht(l){let e,i=l[0],t=[];for(let n=0;n<i.length;n+=1)t[n]=be(he(l,i,n));return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();y(e,"class","log-container svelte-1f4e2ec")},m(n,s){v(n,e,s);for(let r=0;r<t.length;r+=1)t[r].m(e,null);l[2](e)},p(n,s){if(s&1){i=n[0];let r;for(r=0;r<i.length;r+=1){const o=he(n,i,r);t[r]?t[r].p(o,s):(t[r]=be(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){n&&w(e),I(t,n),l[2](null)}}}function bt(l){let e,i;return e=new W({props:{grow:!0,title:"Internal Logs",$$slots:{default:[ht]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&131&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function $t(l,e,i){let t=[""],n=null;const s=o=>{i(0,t=o.messages)};s(pt()),dt(s);function r(o){re[o?"unshift":"push"](()=>{n=o,i(1,n)})}return[t,n,r]}class wt extends O{constructor(e){super(),B(this,e,$t,bt,j,{})}}function $e(l,e,i){const t=l.slice();return t[3]=e[i],t}function we(l){let e,i,t,n=l[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=ve($e(l,n,o));const r=o=>h(s[o],1,1,()=>{s[o]=null});return{c(){e=b(`>
        `),i=$("div");for(let o=0;o<s.length;o+=1)s[o].c();y(i,"class","topbar-subitem-children svelte-13m7anm")},m(o,a){v(o,e,a),v(o,i,a);for(let c=0;c<s.length;c+=1)s[c].m(i,null);t=!0},p(o,a){if(a&2){n=o[1];let c;for(c=0;c<n.length;c+=1){const u=$e(o,n,c);s[c]?(s[c].p(u,a),p(s[c],1)):(s[c]=ve(u),s[c].c(),p(s[c],1),s[c].m(i,null))}for(E(),c=n.length;c<s.length;c+=1)r(c);N()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)p(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)h(s[a]);t=!1},d(o){o&&w(e),o&&w(i),I(s,o)}}}function ve(l){let e,i;return e=new Ke({props:{name:l[3].name,children:l[3].children,click:l[3].click}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,n){const s={};n&2&&(s.name=t[3].name),n&2&&(s.children=t[3].children),n&2&&(s.click=t[3].click),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function vt(l){let e,i,t,n,s,r,o,a=l[1].length&&we(l);return{c(){e=$("div"),i=$("span"),t=b(l[0]),n=D(),a&&a.c(),y(i,"class","topbar-name"),y(e,"class","topbar-subitem svelte-13m7anm")},m(c,u){v(c,e,u),m(e,i),m(i,t),m(e,n),a&&a.m(e,null),s=!0,r||(o=ce(i,"click",function(){ae(l[2])&&l[2].apply(this,arguments)}),r=!0)},p(c,[u]){l=c,(!s||u&1)&&V(t,l[0]),l[1].length?a?(a.p(l,u),u&2&&p(a,1)):(a=we(l),a.c(),p(a,1),a.m(e,null)):a&&(E(),h(a,1,1,()=>{a=null}),N())},i(c){s||(p(a),s=!0)},o(c){h(a),s=!1},d(c){c&&w(e),a&&a.d(),r=!1,o()}}}function yt(l,e,i){let{name:t=""}=e,{children:n=[]}=e,{click:s=null}=e;return l.$$set=r=>{"name"in r&&i(0,t=r.name),"children"in r&&i(1,n=r.children),"click"in r&&i(2,s=r.click)},[t,n,s]}class Ke extends O{constructor(e){super(),B(this,e,yt,vt,j,{name:0,children:1,click:2})}}function ye(l,e,i){const t=l.slice();return t[1]=e[i],t}function ke(l,e,i){const t=l.slice();return t[4]=e[i],t}function Se(l){let e,i,t=l[1].children,n=[];for(let r=0;r<t.length;r+=1)n[r]=Ue(ke(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","topbar-item-children svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,o){if(o&1){t=r[1].children;let a;for(a=0;a<t.length;a+=1){const c=ke(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=Ue(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(E(),a=t.length;a<n.length;a+=1)s(a);N()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function Ue(l){let e,i;return e=new Ke({props:{name:l[4].name,children:l[4].children,click:l[4].click}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,n){const s={};n&1&&(s.name=t[4].name),n&1&&(s.children=t[4].children),n&1&&(s.click=t[4].click),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function ze(l){let e,i,t=l[1].name+"",n,s,r,o,a=l[1].children&&Se(l);return{c(){e=$("div"),i=$("div"),n=b(t),s=D(),a&&a.c(),r=D(),y(i,"class","topbar-item-name svelte-kh5whn"),y(e,"class","topbar-item svelte-kh5whn")},m(c,u){v(c,e,u),m(e,i),m(i,n),m(e,s),a&&a.m(e,null),m(e,r),o=!0},p(c,u){(!o||u&1)&&t!==(t=c[1].name+"")&&V(n,t),c[1].children?a?(a.p(c,u),u&1&&p(a,1)):(a=Se(c),a.c(),p(a,1),a.m(e,r)):a&&(E(),h(a,1,1,()=>{a=null}),N())},i(c){o||(p(a),o=!0)},o(c){h(a),o=!1},d(c){c&&w(e),a&&a.d()}}}function kt(l){let e,i,t=l[0],n=[];for(let r=0;r<t.length;r+=1)n[r]=ze(ye(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","topbar svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,[o]){if(o&1){t=r[0];let a;for(a=0;a<t.length;a+=1){const c=ye(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=ze(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(E(),a=t.length;a<n.length;a+=1)s(a);N()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function St(l,e,i){let{items:t=[]}=e;return l.$$set=n=>{"items"in n&&i(0,t=n.items)},[t]}class Ut extends O{constructor(e){super(),B(this,e,St,kt,j,{items:0})}}const zt=`<h1>What is decapped?</h1>
<p>Decapped is an x86 emulator capable of emulating a small part of real mode (the old 16 bit instruction set).<br>
It's still early in development but can already run a couple of instructions.</p>
<p>Our current target is getting FreeDOS to boot!</p>
`;function Ve(l,e,i){const t=l.slice();return t[5]=e[i],t}function Le(l){let e,i=l[5].name+"",t,n,s,r,o;return{c(){e=$("div"),t=b(i),n=D(),y(e,"class",s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,t),m(e,n),r||(o=ce(e,"click",function(){ae(l[2].bind(this,l[5].name))&&l[2].bind(this,l[5].name).apply(this,arguments)}),r=!0)},p(a,c){l=a,c&1&&i!==(i=l[5].name+"")&&V(t,i),c&3&&s!==(s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")&&y(e,"class",s)},d(a){a&&w(e),r=!1,o()}}}function De(l){let e,i,t;var n=l[0][l[1]].component;function s(r){return{props:{data:r[0][r[1]].data}}}return n&&(e=new n(s(l))),{c(){e&&L(e.$$.fragment),i=R()},m(r,o){e&&U(e,r,o),v(r,i,o),t=!0},p(r,o){const a={};if(o&3&&(a.data=r[0][r[1]].data),n!==(n=r[0][r[1]].component)){if(e){E();const c=e;h(c.$$.fragment,1,0,()=>{z(c,1)}),N()}n?(e=new n(s(r)),L(e.$$.fragment),p(e.$$.fragment,1),U(e,i.parentNode,i)):e=null}else n&&e.$set(a)},i(r){t||(e&&p(e.$$.fragment,r),t=!0)},o(r){e&&h(e.$$.fragment,r),t=!1},d(r){r&&w(i),e&&z(e,r)}}}function Vt(l){let e,i,t,n,s=l[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Le(Ve(l,s,a));let o=l[1]!==null&&De(l);return{c(){e=$("div"),i=$("div");for(let a=0;a<r.length;a+=1)r[a].c();t=D(),o&&o.c(),y(i,"class","tabbar-items svelte-1ujyfaq"),y(e,"class","tabbar svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,i);for(let u=0;u<r.length;u+=1)r[u].m(i,null);m(e,t),o&&o.m(e,null),n=!0},p(a,[c]){if(c&7){s=a[0];let u;for(u=0;u<s.length;u+=1){const _=Ve(a,s,u);r[u]?r[u].p(_,c):(r[u]=Le(_),r[u].c(),r[u].m(i,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}a[1]!==null?o?(o.p(a,c),c&2&&p(o,1)):(o=De(a),o.c(),p(o,1),o.m(e,null)):o&&(E(),h(o,1,1,()=>{o=null}),N())},i(a){n||(p(o),n=!0)},o(a){h(o),n=!1},d(a){a&&w(e),I(r,a),o&&o.d()}}}function Lt(l,e,i){let{content:t=[]}=e,{defaultTab:n=""}=e,s=null;if(n!==""){for(let a in t)if(t[a].name===n){s=a;break}s===null&&(n="")}const r=a=>s!==null&&t[s].name===a,o=a=>{if(r(a))i(1,s=null);else for(let c in t)if(t[c].name===a){i(1,s=c);break}};return l.$$set=a=>{"content"in a&&i(0,t=a.content),"defaultTab"in a&&i(3,n=a.defaultTab)},[t,s,o,n]}class Re extends O{constructor(e){super(),B(this,e,Lt,Vt,j,{content:0,defaultTab:3})}}const S={memory:null,runtime_imports:{},runtime_instance:null,interpreter:null};async function Te(l){const e=await fetch(l),i=Dt(await e.arrayBuffer(),1,2);return await WebAssembly.compile(i)}function Dt(l,e=1,i=1){const t=(u,_)=>{let f=0,d=0,g=0;for(;;){const k=u.getUint8(_+g);if(f|=(k&127)<<d,(k&47513075712)===0)break;d+=7,g++}return f},n=l.slice(0,l.byteLength),s=new DataView(n);if(s.getUint32(0)!==6386541)return n;const o=4+4,a=t(s,o+1),c=o+a+2;return t(s,c+2),n}function M(l,e=8){return S.memory.buffer.slice(l,l+e)}function Tt(l,e){const i=e.byteLength,t=new DataView(S.memory.buffer,l,i),n=new DataView(e,0,i);let s=0;for(;s<i;){const r=i-s;r>=4?(t.setUint32(s,n.getUint32(s,!0),!0),s+=4):r>=2?(t.setUint16(s,n.getUint16(s,!0),!0),s+=4):t.setUint8(s,n.getUint8(s))}}function At(l){let e="",i=0,t=!1;for(;!t;){const n=new Uint8Array(M(l+i));i+=n.byteLength;for(let s=0;s<n.byteLength;s++){if(n[s]===0){t=!0;break}e+=String.fromCharCode(n[s])}}return e}function jt(l,e,i){const t=new DataView(S.memory.buffer,l,i),n=new DataView(S.memory.buffer,e,i);for(let s=0;s<i;s++)t.setUint8(s,n.getUint8(s));return l}function Bt(l,e,i){const t=new DataView(S.memory.buffer,l,i);for(let n=0;n<i;n++)t.setUint8(n,e);return l}function Ze(l){A(`${At(l)}`)}function Ot(l,e){e!==0&&(Ze(e),A("")),A(`${l.toString(16)}
`)}function It(){const l=S.runtime_instance.exports.malloc_get_dynamic_base(),e=new DataView(M(l,32));return{pages_max:e.getUint32(0,!0),pages_used:e.getUint32(4,!0),bitmap_base:e.getUint32(8,!0),size_base:e.getUint32(12,!0),current_index:e.getUint32(16,!0),dynamic_base:e.getUint32(20,!0),type_base:e.getUint32(24,!0)}}function fe(){return S}async function Mt(){S.runtime_imports.memset=Bt,S.runtime_imports.log_string=Ze,S.runtime_imports.log_hex=Ot,S.runtime_imports.memcpy=jt;const l=S.runtime_imports;S.memory=new WebAssembly.Memory({initial:10,maximum:10,shared:!0}),A(`allocated memory pool, size: 0x${S.memory.buffer.byteLength.toString(16)}
`);const e=await Te("wasm/runtime.wasm");S.runtime_instance=new WebAssembly.Instance(e,{env:ne({memory:S.memory},l)});const i=await Te("wasm/interpreter.wasm");S.interpreter=new WebAssembly.Instance(i,{env:ne({memory:S.memory},l)}),A(`calling runtime_init
`);const t=S.runtime_instance.exports.runtime_init(),n=S.runtime_instance.exports.malloc_get_dynamic_base();A(`malloc start: ${n.toString(16)}
`),A(`runtime_init finished, result: 0x${t.toString(16)}
`),A(`calling interpreter_init
`);const s=S.interpreter.exports.interpreter_init();A(`interpreter_init finished, result: 0x${s.toString(16)}
`),window.ctx=S}function Ae(l,e,i){const t=l.slice();return t[8]=e[i],t}function je(l,e,i){const t=l.slice();return t[11]=e[i],t}function Be(l){let e,i=l[11].name+"",t,n,s=l[11].value+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s),y(e,"class","allocator-info-entry")},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[11].name+"")&&V(t,i),a&1&&s!==(s=o[11].value+"")&&V(r,s)},d(o){o&&w(e)}}}function Oe(l){let e,i,t=l[2][l[1][l[8]].type]+"",n,s,r=parseInt(l[8]).toString(16)+"",o,a,c=l[1][l[8]].size.toString(16)+"",u,_,f=l[1][l[8]].at+"",d;return{c(){e=$("pre"),i=b("["),n=b(t),s=b("]	0x"),o=b(r),a=b("	 - 0x"),u=b(c),_=b("	@ "),d=b(f),y(e,"class","svelte-xenrtk")},m(g,k){v(g,e,k),m(e,i),m(e,n),m(e,s),m(e,o),m(e,a),m(e,u),m(e,_),m(e,d)},p(g,k){k&2&&t!==(t=g[2][g[1][g[8]].type]+"")&&V(n,t),k&2&&r!==(r=parseInt(g[8]).toString(16)+"")&&V(o,r),k&2&&c!==(c=g[1][g[8]].size.toString(16)+"")&&V(u,c),k&2&&f!==(f=g[1][g[8]].at+"")&&V(d,f)},d(g){g&&w(e)}}}function Et(l){let e,i=Object.keys(l[1]),t=[];for(let n=0;n<i.length;n+=1)t[n]=Oe(Ae(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=Object.keys(n[1]);let r;for(r=0;r<i.length;r+=1){const o=Ae(n,i,r);t[r]?t[r].p(o,s):(t[r]=Oe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Nt(l){let e,i,t,n,s=l[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=Be(je(l,s,o));return t=new W({props:{title:"Allocations",$$slots:{default:[Et]},$$scope:{ctx:l}}}),{c(){e=$("div");for(let o=0;o<r.length;o+=1)r[o].c();i=D(),L(t.$$.fragment)},m(o,a){v(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);m(e,i),U(t,e,null),n=!0},p(o,[a]){if(a&1){s=o[0];let u;for(u=0;u<s.length;u+=1){const _=je(o,s,u);r[u]?r[u].p(_,a):(r[u]=Be(_),r[u].c(),r[u].m(e,i))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}const c={};a&16386&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){h(t.$$.fragment,o),n=!1},d(o){o&&w(e),I(r,o),z(t)}}}function qt(l,e,i){let t=[{name:"Loading",value:"..."}],n={};const s={pages_max:"Max pages",pages_used:"Pages used",bitmap_base:"Bitmap",size_base:"Size Array",current_index:"Head",dynamic_base:"Dynamic Base",type_base:"Type Base"},r=u=>u.toString(16),o={pages_max:r,pages_used:r,bitmap_base:r,size_base:r,type_base:r,dynamic_base:r,current_index:r},a=["generic","runtime","page table","guest memory"],c=u=>{const _={},f=u.pages_max/8,d=new DataView(M(u.bitmap_base,f)),g=new DataView(M(u.size_base,u.pages_max*4)),k=new DataView(M(u.type_base,u.pages_max));let T=0;for(;T<u.pages_max&&T<256;)if(d.getUint8(Math.floor(T/8))&1<<T%8){const H=u.dynamic_base+T*4096,te=n.hasOwnProperty(H)?n[H].at:Math.floor(new Date().getTime()/1e3),P=g.getUint32(T*4,!0),J=k.getUint8(T);_[H]={at:te,size:P,type:J},T+=P>0?P:1}else T++;i(1,n=_)};return setInterval(()=>{const u=[],_=It();for(let f in _){const d=s[f];u.push({name:d,value:o[f](_[f])})}i(0,t=u),c(_)},500),[t,n,a]}class Ct extends O{constructor(e){super(),B(this,e,qt,Nt,j,{})}}function Ie(l,e,i){const t=l.slice();return t[1]=e[i],t}function Me(l){let e,i=l[0].registers,t=[];for(let n=0;n<i.length;n+=1)t[n]=Ee(Ie(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&1){i=n[0].registers;let r;for(r=0;r<i.length;r+=1){const o=Ie(n,i,r);t[r]?t[r].p(o,s):(t[r]=Ee(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Ee(l){let e,i=l[1].name+"",t,n,s=l[1].value.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1].name+"")&&V(t,i),a&1&&s!==(s=o[1].value.toString(16)+"")&&V(r,s)},d(o){o&&w(e)}}}function Pt(l){let e,i=l[0]&&Me(l);return{c(){e=$("div"),i&&i.c()},m(t,n){v(t,e,n),i&&i.m(e,null)},p(t,[n]){t[0]?i?i.p(t,n):(i=Me(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:x,o:x,d(t){t&&w(e),i&&i.d()}}}function xt(l,e,i){let{data:t}=e;return l.$$set=n=>{"data"in n&&i(0,t=n.data)},[t]}class Wt extends O{constructor(e){super(),B(this,e,xt,Pt,j,{data:0})}}function Ht(l){let e,i,t,n,s,r;return s=new Re({props:{content:l[1],defaultTab:l[2]}}),{c(){e=$("div"),i=b("core count: "),t=b(l[0]),n=D(),L(s.$$.fragment)},m(o,a){v(o,e,a),m(e,i),m(e,t),m(e,n),U(s,e,null),r=!0},p(o,[a]){(!r||a&1)&&V(t,o[0]);const c={};a&2&&(c.content=o[1]),a&4&&(c.defaultTab=o[2]),s.$set(c)},i(o){r||(p(s.$$.fragment,o),r=!0)},o(o){h(s.$$.fragment,o),r=!1},d(o){o&&w(e),z(s)}}}function Ft(l,e,i){let t=0,n=[],s="";const r=()=>{const o=fe();if(o.runtime_instance===null)return;const a=o.runtime_instance.exports.__imp_cpu_get_context(),c=8,u=new DataView(M(a,c));i(0,t=u.getUint8(0));const _=u.getUint32(4,!0),f=4,d=new DataView(M(_,f*t)),g=["rax","rbx","rcx","rdx","rdi","rsi","rbp","rsp","rip","rflags"],k=[];for(let T=0;T<t;T++){const Z=d.getUint32(T*f,!0),H=8+8+8+8+8+8+8+8+8+8,te=new DataView(M(Z,H)),P={registers:[]};for(let J in g){const Je=g[J],Qe=te.getBigUint64(8*J,!0);P.registers.push({name:Je,value:Qe})}k.push({name:`Core ${T}`,component:Wt,data:P})}i(1,n=k),i(2,s=k[0].name)};return setInterval(r,500),r(),[t,n,s]}class Gt extends O{constructor(e){super(),B(this,e,Ft,Ht,j,{})}}function Ne(l,e,i){const t=l.slice();return t[4]=e[i],t}function qe(l){let e,i=l[2](l[4])+"",t,n,s=l[4].child.toString(16)+"",r,o;return{c(){e=$("div"),t=b(i),n=b(" - "),r=b(s),o=D()},m(a,c){v(a,e,c),m(e,t),m(e,n),m(e,r),m(e,o)},p(a,c){c&2&&i!==(i=a[2](a[4])+"")&&V(t,i),c&2&&s!==(s=a[4].child.toString(16)+"")&&V(r,s)},d(a){a&&w(e)}}}function Kt(l){let e,i=l[1],t=[];for(let n=0;n<i.length;n+=1)t[n]=qe(Ne(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=n[1];let r;for(r=0;r<i.length;r+=1){const o=Ne(n,i,r);t[r]?t[r].p(o,s):(t[r]=qe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Rt(l){let e,i;return e=new W({props:{title:l[0],$$slots:{default:[Kt]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&1&&(s.title=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function Zt(l,e,i){let{name:t=""}=e,{parents:n=[]}=e,{table:s=[]}=e;const r=o=>{const a=[o.index];let c=0;for(;o.parent!==null&&c<n.length;)o=n[c][o.parent],a.push(o.index),c++;return a.map(u=>u.toString(16)).join(" ")};return l.$$set=o=>{"name"in o&&i(0,t=o.name),"parents"in o&&i(3,n=o.parents),"table"in o&&i(1,s=o.table)},[t,s,r,n]}class ie extends O{constructor(e){super(),B(this,e,Zt,Rt,j,{name:0,parents:3,table:1})}}function Ce(l,e,i){const t=l.slice();return t[6]=e[i],t}function Pe(l){let e,i=l[1](l[6]).toString(16)+"",t,n,s=l[6].child.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(" > "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1](o[6]).toString(16)+"")&&V(t,i),a&1&&s!==(s=o[6].child.toString(16)+"")&&V(r,s)},d(o){o&&w(e)}}}function Jt(l){let e,i=l[0].p2,t=[];for(let n=0;n<i.length;n+=1)t[n]=Pe(Ce(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&3){i=n[0].p2;let r;for(r=0;r<i.length;r+=1){const o=Ce(n,i,r);t[r]?t[r].p(o,s):(t[r]=Pe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Qt(l){let e,i,t,n,s,r,o,a,c;return i=new ie({props:{name:"Level 0",table:l[0].p0}}),n=new ie({props:{name:"Level 1",table:l[0].p1,parents:[l[0].p0]}}),r=new ie({props:{name:"Level 2",table:l[0].p2,parents:[l[0].p1,l[0].p0]}}),a=new W({props:{title:"Address Space",$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){e=$("div"),L(i.$$.fragment),t=D(),L(n.$$.fragment),s=D(),L(r.$$.fragment),o=D(),L(a.$$.fragment)},m(u,_){v(u,e,_),U(i,e,null),m(e,t),U(n,e,null),m(e,s),U(r,e,null),m(e,o),U(a,e,null),c=!0},p(u,[_]){const f={};_&1&&(f.table=u[0].p0),i.$set(f);const d={};_&1&&(d.table=u[0].p1),_&1&&(d.parents=[u[0].p0]),n.$set(d);const g={};_&1&&(g.table=u[0].p2),_&1&&(g.parents=[u[0].p1,u[0].p0]),r.$set(g);const k={};_&513&&(k.$$scope={dirty:_,ctx:u}),a.$set(k)},i(u){c||(p(i.$$.fragment,u),p(n.$$.fragment,u),p(r.$$.fragment,u),p(a.$$.fragment,u),c=!0)},o(u){h(i.$$.fragment,u),h(n.$$.fragment,u),h(r.$$.fragment,u),h(a.$$.fragment,u),c=!1},d(u){u&&w(e),z(i),z(n),z(r),z(a)}}}const xe=4;function Xt(l,e,i){let t={p0:[],p1:[],p2:[]},n;const s=["p0","p1","p2"],r=(c,u,_,f=null)=>{const d=new DataView(M(c,u*xe));for(let g=0;g<u;g++){const k=d.getUint32(g*xe,!0);if(k===0)continue;const T={index:g,child:k,parent:f},Z=n[s[_]].push(T)-1;_<2&&r(k,512,_+1,Z)}},o=fe();return setInterval(()=>{n={p0:[],p1:[],p2:[]},r(o.runtime_instance.exports.guest_memory_get_p0(),4,0),i(0,t=n)},500),[t,c=>{const u=c.index,_=t.p1[c.parent],f=_.index;return(t.p0[_.parent].index<<30)+(f<<21)+(u<<12)>>>0}]}class Yt extends O{constructor(e){super(),B(this,e,Xt,Qt,j,{})}}function en(l){let e,i;return e=new Re({props:{content:l[0],defaultTab:"CPU"}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p:x,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function tn(l){let e,i;return e=new W({props:{title:"Debugger",$$slots:{default:[en]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&2&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function nn(l){return[[{name:"Allocator",component:Ct},{name:"Guest Memory",component:Yt},{name:"CPU",component:Gt}]]}class ln extends O{constructor(e){super(),B(this,e,nn,tn,j,{})}}function rn(l){let e;return{c(){e=$("div"),y(e,"class","markdown")},m(i,t){v(i,e,t),e.innerHTML=zt},p:x,d(i){i&&w(e)}}}function sn(l){let e,i,t,n,s,r,o,a,c,u,_;return i=new Ut({props:{items:l[0]}}),s=new W({props:{title:"README",$$slots:{default:[rn]},$$scope:{ctx:l}}}),o=new wt({}),u=new ln({}),{c(){e=$("div"),L(i.$$.fragment),t=D(),n=$("div"),L(s.$$.fragment),r=D(),L(o.$$.fragment),a=D(),c=$("div"),L(u.$$.fragment),y(c,"class","instructions-container svelte-1p7s32z"),y(n,"class","content svelte-1p7s32z"),y(e,"class","container svelte-1p7s32z")},m(f,d){v(f,e,d),U(i,e,null),m(e,t),m(e,n),U(s,n,null),m(n,r),U(o,n,null),m(n,a),m(n,c),U(u,c,null),_=!0},p(f,[d]){const g={};d&8&&(g.$$scope={dirty:d,ctx:f}),s.$set(g)},i(f){_||(p(i.$$.fragment,f),p(s.$$.fragment,f),p(o.$$.fragment,f),p(u.$$.fragment,f),_=!0)},o(f){h(i.$$.fragment,f),h(s.$$.fragment,f),h(o.$$.fragment,f),h(u.$$.fragment,f),_=!1},d(f){f&&w(e),z(i),z(s),z(o),z(u)}}}function on(l){const e=(n=1)=>{document.body.style.zoom=`${n*100}%`},i=(n,...s)=>(...r)=>n(...s,...r);return[[{name:"View",children:[{name:"Zoom",children:[{name:"100%",click:i(e,1)},{name:"200%",click:i(e,2)},{name:"300%",click:i(e,3)},{name:"400%",click:i(e,4)}]}]}]]}class an extends O{constructor(e){super(),B(this,e,on,sn,j,{})}}const ee={floppies:[]};async function cn(l,e){A(`loading floppy: '${e}' into drive #${l}
`);const t=await(await fetch(e)).arrayBuffer();ee.floppies[l]=t}function un(l,e,i,t){const n=ee.floppies[l];if(console.log(ee),n===void 0)return;console.log(ee);const s=fe();for(let c=1;c<i;c++)s.runtime_instance.exports.__imp_guest_memory_translate(t+512*c);const r=i*512,o=n.slice(e*512,e*512+r),a=s.runtime_instance.exports.__imp_guest_memory_translate(t);console.log(`copying sectors ${e}-${e+i} to (${t.toString(16)} > ${a.toString(16)})`),Tt(a,o)}const We=async(l,e)=>{A(`${e}...
`),await l,A(`${e} done
`)},fn=async()=>{new an({target:document.body})},_n=async()=>{await We(fn(),"initializing frontend"),await We(Mt(),"initializing runtime & backend"),console.log("runtime exports:",ctx.runtime_instance.exports);const l=540033104;await cn(0,"floppies/x86BOOT.img"),un(0,0,17,l),ctx.runtime_instance.exports.__imp_cpu_core_set_rip(0,BigInt(l)),ctx.runtime_instance.exports.__imp_log_instruction(l)};window.addEventListener("load",_n);
