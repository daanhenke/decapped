var et=Object.defineProperty;var pe=Object.getOwnPropertySymbols;var tt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var de=(l,e,i)=>e in l?et(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,Y=(l,e)=>{for(var i in e||(e={}))tt.call(e,i)&&de(l,i,e[i]);if(pe)for(var i of pe(e))nt.call(e,i)&&de(l,i,e[i]);return l};const lt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};lt();function W(){}function it(l,e){for(const i in e)l[i]=e[i];return l}function Ke(l){return l()}function he(){return Object.create(null)}function J(l){l.forEach(Ke)}function fe(l){return typeof l=="function"}function A(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function rt(l){return Object.keys(l).length===0}function st(l,e,i,t){if(l){const n=Re(l,e,i,t);return l[0](n)}}function Re(l,e,i,t){return l[1]&&t?it(i.ctx.slice(),l[1](t(e))):i.ctx}function ot(l,e,i,t){if(l[2]&&t){const n=l[2](t(i));if(e.dirty===void 0)return n;if(typeof n=="object"){const s=[],r=Math.max(e.dirty.length,n.length);for(let o=0;o<r;o+=1)s[o]=e.dirty[o]|n[o];return s}return e.dirty|n}return e.dirty}function at(l,e,i,t,n,s){if(n){const r=Re(e,i,t,s);l.p(r,n)}}function ct(l){if(l.ctx.length>32){const e=[],i=l.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function m(l,e){l.appendChild(e)}function v(l,e,i){l.insertBefore(e,i||null)}function w(l){l.parentNode.removeChild(l)}function I(l,e){for(let i=0;i<l.length;i+=1)l[i]&&l[i].d(e)}function $(l){return document.createElement(l)}function b(l){return document.createTextNode(l)}function L(){return b(" ")}function Q(){return b("")}function _e(l,e,i,t){return l.addEventListener(e,i,t),()=>l.removeEventListener(e,i,t)}function k(l,e,i){i==null?l.removeAttribute(e):l.getAttribute(e)!==i&&l.setAttribute(e,i)}function ut(l){return Array.from(l.childNodes)}function T(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}let me;function Z(l){me=l}const R=[],ae=[],te=[],be=[],ft=Promise.resolve();let ce=!1;function _t(){ce||(ce=!0,ft.then(Ze))}function ue(l){te.push(l)}const se=new Set;let ee=0;function Ze(){const l=me;do{for(;ee<R.length;){const e=R[ee];ee++,Z(e),mt(e.$$)}for(Z(null),R.length=0,ee=0;ae.length;)ae.pop()();for(let e=0;e<te.length;e+=1){const i=te[e];se.has(i)||(se.add(i),i())}te.length=0}while(R.length);for(;be.length;)be.pop()();ce=!1,se.clear(),Z(l)}function mt(l){if(l.fragment!==null){l.update(),J(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(ue)}}const ne=new Set;let C;function M(){C={r:0,c:[],p:C}}function E(){C.r||J(C.c),C=C.p}function p(l,e){l&&l.i&&(ne.delete(l),l.i(e))}function h(l,e,i,t){if(l&&l.o){if(ne.has(l))return;ne.add(l),C.c.push(()=>{ne.delete(l),t&&(i&&l.d(1),t())}),l.o(e)}}function V(l){l&&l.c()}function U(l,e,i,t){const{fragment:n,on_mount:s,on_destroy:r,after_update:o}=l.$$;n&&n.m(e,i),t||ue(()=>{const a=s.map(Ke).filter(fe);r?r.push(...a):J(a),l.$$.on_mount=[]}),o.forEach(ue)}function z(l,e){const i=l.$$;i.fragment!==null&&(J(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function gt(l,e){l.$$.dirty[0]===-1&&(R.push(l),_t(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function B(l,e,i,t,n,s,r,o=[-1]){const a=me;Z(l);const c=l.$$={fragment:null,ctx:null,props:s,update:W,not_equal:n,bound:he(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:he(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=i?i(l,e.props||{},(_,f,...d)=>{const g=d.length?d[0]:f;return c.ctx&&n(c.ctx[_],c.ctx[_]=g)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](g),u&&gt(l,_)),f}):[],c.update(),u=!0,J(c.before_update),c.fragment=t?t(c.ctx):!1,e.target){if(e.hydrate){const _=ut(e.target);c.fragment&&c.fragment.l(_),_.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&p(l.$$.fragment),U(l,e.target,e.anchor,e.customElement),Ze()}Z(a)}class x{$destroy(){z(this,1),this.$destroy=W}$on(e,i){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(i),()=>{const n=t.indexOf(i);n!==-1&&t.splice(n,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function $e(l){let e,i;const t=l[5].default,n=st(t,l,l[4],null);return{c(){e=$("div"),n&&n.c(),k(e,"class","window-content svelte-1qojbbx")},m(s,r){v(s,e,r),n&&n.m(e,null),i=!0},p(s,r){n&&n.p&&(!i||r&16)&&at(n,t,s,s[4],i?ot(t,s[4],r,null):ct(s[4]),null)},i(s){i||(p(n,s),i=!0)},o(s){h(n,s),i=!1},d(s){s&&w(e),n&&n.d(s)}}}function pt(l){let e,i,t,n,s,r,o,a,c,u,_,f=!l[2]&&$e(l);return{c(){e=$("div"),i=$("div"),t=$("div"),n=b(l[0]),s=L(),r=$("div"),r.innerHTML=`<span>-</span> 
            <span>x</span>`,o=L(),f&&f.c(),k(r,"class","window-icons svelte-1qojbbx"),k(i,"class","window-titlebar svelte-1qojbbx"),k(e,"class",a="window "+(l[1]?"window-grow":"")+" svelte-1qojbbx")},m(d,g){v(d,e,g),m(e,i),m(i,t),m(t,n),m(i,s),m(i,r),m(e,o),f&&f.m(e,null),c=!0,u||(_=_e(i,"click",l[3]),u=!0)},p(d,[g]){(!c||g&1)&&T(n,d[0]),d[2]?f&&(M(),h(f,1,1,()=>{f=null}),E()):f?(f.p(d,g),g&4&&p(f,1)):(f=$e(d),f.c(),p(f,1),f.m(e,null)),(!c||g&2&&a!==(a="window "+(d[1]?"window-grow":"")+" svelte-1qojbbx"))&&k(e,"class",a)},i(d){c||(p(f),c=!0)},o(d){h(f),c=!1},d(d){d&&w(e),f&&f.d(),u=!1,_()}}}function dt(l,e,i){let{$$slots:t={},$$scope:n}=e,{title:s=""}=e,{grow:r=!1}=e,o=!1;const a=()=>{i(2,o=!o)};return l.$$set=c=>{"title"in c&&i(0,s=c.title),"grow"in c&&i(1,r=c.grow),"$$scope"in c&&i(4,n=c.$$scope)},[s,r,o,a,n,t]}class H extends x{constructor(e){super(),B(this,e,dt,pt,A,{title:0,grow:1})}}const q={messages:[""],callbacks:[]};function j(l){const e=l.split(`
`);for(let i in e){const t=e[i];q.messages[q.messages.length-1]+=t,i<e.length-1&&q.messages.push("")}for(let i of q.callbacks)i(q)}function ht(){return q}function bt(l){q.callbacks.push(l)}function we(l,e,i){const t=l.slice();return t[4]=e[i],t}function ve(l){let e,i=l[4]+"",t,n;return{c(){e=$("div"),t=b(i),n=L(),k(e,"class","log-message svelte-1f4e2ec")},m(s,r){v(s,e,r),m(e,t),m(e,n)},p(s,r){r&1&&i!==(i=s[4]+"")&&T(t,i)},d(s){s&&w(e)}}}function $t(l){let e,i=l[0],t=[];for(let n=0;n<i.length;n+=1)t[n]=ve(we(l,i,n));return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();k(e,"class","log-container svelte-1f4e2ec")},m(n,s){v(n,e,s);for(let r=0;r<t.length;r+=1)t[r].m(e,null);l[2](e)},p(n,s){if(s&1){i=n[0];let r;for(r=0;r<i.length;r+=1){const o=we(n,i,r);t[r]?t[r].p(o,s):(t[r]=ve(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){n&&w(e),I(t,n),l[2](null)}}}function wt(l){let e,i;return e=new H({props:{grow:!0,title:"Internal Logs",$$slots:{default:[$t]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&131&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function vt(l,e,i){let t=[""],n=null;const s=o=>{i(0,t=o.messages)};s(ht()),bt(s);function r(o){ae[o?"unshift":"push"](()=>{n=o,i(1,n)})}return[t,n,r]}class yt extends x{constructor(e){super(),B(this,e,vt,wt,A,{})}}function ye(l,e,i){const t=l.slice();return t[3]=e[i],t}function ke(l){let e,i,t,n=l[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=Se(ye(l,n,o));const r=o=>h(s[o],1,1,()=>{s[o]=null});return{c(){e=b(`>
        `),i=$("div");for(let o=0;o<s.length;o+=1)s[o].c();k(i,"class","topbar-subitem-children svelte-13m7anm")},m(o,a){v(o,e,a),v(o,i,a);for(let c=0;c<s.length;c+=1)s[c].m(i,null);t=!0},p(o,a){if(a&2){n=o[1];let c;for(c=0;c<n.length;c+=1){const u=ye(o,n,c);s[c]?(s[c].p(u,a),p(s[c],1)):(s[c]=Se(u),s[c].c(),p(s[c],1),s[c].m(i,null))}for(M(),c=n.length;c<s.length;c+=1)r(c);E()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)p(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)h(s[a]);t=!1},d(o){o&&w(e),o&&w(i),I(s,o)}}}function Se(l){let e,i;return e=new Je({props:{name:l[3].name,children:l[3].children,click:l[3].click}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,n){const s={};n&2&&(s.name=t[3].name),n&2&&(s.children=t[3].children),n&2&&(s.click=t[3].click),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function kt(l){let e,i,t,n,s,r,o,a=l[1].length&&ke(l);return{c(){e=$("div"),i=$("span"),t=b(l[0]),n=L(),a&&a.c(),k(i,"class","topbar-name"),k(e,"class","topbar-subitem svelte-13m7anm")},m(c,u){v(c,e,u),m(e,i),m(i,t),m(e,n),a&&a.m(e,null),s=!0,r||(o=_e(i,"click",function(){fe(l[2])&&l[2].apply(this,arguments)}),r=!0)},p(c,[u]){l=c,(!s||u&1)&&T(t,l[0]),l[1].length?a?(a.p(l,u),u&2&&p(a,1)):(a=ke(l),a.c(),p(a,1),a.m(e,null)):a&&(M(),h(a,1,1,()=>{a=null}),E())},i(c){s||(p(a),s=!0)},o(c){h(a),s=!1},d(c){c&&w(e),a&&a.d(),r=!1,o()}}}function St(l,e,i){let{name:t=""}=e,{children:n=[]}=e,{click:s=null}=e;return l.$$set=r=>{"name"in r&&i(0,t=r.name),"children"in r&&i(1,n=r.children),"click"in r&&i(2,s=r.click)},[t,n,s]}class Je extends x{constructor(e){super(),B(this,e,St,kt,A,{name:0,children:1,click:2})}}function Ue(l,e,i){const t=l.slice();return t[1]=e[i],t}function ze(l,e,i){const t=l.slice();return t[4]=e[i],t}function Te(l){let e,i,t=l[1].children,n=[];for(let r=0;r<t.length;r+=1)n[r]=Ve(ze(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();k(e,"class","topbar-item-children svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,o){if(o&1){t=r[1].children;let a;for(a=0;a<t.length;a+=1){const c=ze(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=Ve(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(M(),a=t.length;a<n.length;a+=1)s(a);E()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function Ve(l){let e,i;return e=new Je({props:{name:l[4].name,children:l[4].children,click:l[4].click}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,n){const s={};n&1&&(s.name=t[4].name),n&1&&(s.children=t[4].children),n&1&&(s.click=t[4].click),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function Le(l){let e,i,t=l[1].name+"",n,s,r,o,a=l[1].children&&Te(l);return{c(){e=$("div"),i=$("div"),n=b(t),s=L(),a&&a.c(),r=L(),k(i,"class","topbar-item-name svelte-kh5whn"),k(e,"class","topbar-item svelte-kh5whn")},m(c,u){v(c,e,u),m(e,i),m(i,n),m(e,s),a&&a.m(e,null),m(e,r),o=!0},p(c,u){(!o||u&1)&&t!==(t=c[1].name+"")&&T(n,t),c[1].children?a?(a.p(c,u),u&1&&p(a,1)):(a=Te(c),a.c(),p(a,1),a.m(e,r)):a&&(M(),h(a,1,1,()=>{a=null}),E())},i(c){o||(p(a),o=!0)},o(c){h(a),o=!1},d(c){c&&w(e),a&&a.d()}}}function Ut(l){let e,i,t=l[0],n=[];for(let r=0;r<t.length;r+=1)n[r]=Le(Ue(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();k(e,"class","topbar svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,[o]){if(o&1){t=r[0];let a;for(a=0;a<t.length;a+=1){const c=Ue(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=Le(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(M(),a=t.length;a<n.length;a+=1)s(a);E()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function zt(l,e,i){let{items:t=[]}=e;return l.$$set=n=>{"items"in n&&i(0,t=n.items)},[t]}class Tt extends x{constructor(e){super(),B(this,e,zt,Ut,A,{items:0})}}const Vt=`<h1>What is decapped?</h1>
<p>Decapped is an x86 emulator capable of emulating a small part of real mode (the old 16 bit instruction set).<br>
It's still early in development but can already run a couple of instructions.</p>
<p>Our current target is getting FreeDOS to boot!</p>
`;function De(l,e,i){const t=l.slice();return t[5]=e[i],t}function je(l){let e,i=l[5].name+"",t,n,s,r,o;return{c(){e=$("div"),t=b(i),n=L(),k(e,"class",s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,t),m(e,n),r||(o=_e(e,"click",function(){fe(l[2].bind(this,l[5].name))&&l[2].bind(this,l[5].name).apply(this,arguments)}),r=!0)},p(a,c){l=a,c&1&&i!==(i=l[5].name+"")&&T(t,i),c&3&&s!==(s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")&&k(e,"class",s)},d(a){a&&w(e),r=!1,o()}}}function Ae(l){let e,i,t;var n=l[0][l[1]].component;function s(r){return{props:{data:r[0][r[1]].data}}}return n&&(e=new n(s(l))),{c(){e&&V(e.$$.fragment),i=Q()},m(r,o){e&&U(e,r,o),v(r,i,o),t=!0},p(r,o){const a={};if(o&3&&(a.data=r[0][r[1]].data),n!==(n=r[0][r[1]].component)){if(e){M();const c=e;h(c.$$.fragment,1,0,()=>{z(c,1)}),E()}n?(e=new n(s(r)),V(e.$$.fragment),p(e.$$.fragment,1),U(e,i.parentNode,i)):e=null}else n&&e.$set(a)},i(r){t||(e&&p(e.$$.fragment,r),t=!0)},o(r){e&&h(e.$$.fragment,r),t=!1},d(r){r&&w(i),e&&z(e,r)}}}function Lt(l){let e,i,t,n,s=l[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=je(De(l,s,a));let o=l[1]!==null&&Ae(l);return{c(){e=$("div"),i=$("div");for(let a=0;a<r.length;a+=1)r[a].c();t=L(),o&&o.c(),k(i,"class","tabbar-items svelte-1ujyfaq"),k(e,"class","tabbar svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,i);for(let u=0;u<r.length;u+=1)r[u].m(i,null);m(e,t),o&&o.m(e,null),n=!0},p(a,[c]){if(c&7){s=a[0];let u;for(u=0;u<s.length;u+=1){const _=De(a,s,u);r[u]?r[u].p(_,c):(r[u]=je(_),r[u].c(),r[u].m(i,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}a[1]!==null?o?(o.p(a,c),c&2&&p(o,1)):(o=Ae(a),o.c(),p(o,1),o.m(e,null)):o&&(M(),h(o,1,1,()=>{o=null}),E())},i(a){n||(p(o),n=!0)},o(a){h(o),n=!1},d(a){a&&w(e),I(r,a),o&&o.d()}}}function Dt(l,e,i){let{content:t=[]}=e,{defaultTab:n=""}=e,s=null;if(n!==""){for(let a in t)if(t[a].name===n){s=a;break}s===null&&(n="")}const r=a=>s!==null&&t[s].name===a,o=a=>{if(r(a))i(1,s=null);else for(let c in t)if(t[c].name===a){i(1,s=c);break}};return l.$$set=a=>{"content"in a&&i(0,t=a.content),"defaultTab"in a&&i(3,n=a.defaultTab)},[t,s,o,n]}class Qe extends x{constructor(e){super(),B(this,e,Dt,Lt,A,{content:0,defaultTab:3})}}const y={memory:null,runtime_imports:{},runtime_instance:null,backend:null,runtime_exports:{}};async function Be(l){const e=await fetch(l),i=jt(await e.arrayBuffer(),1,2);return await WebAssembly.compile(i)}function jt(l,e=1,i=1){const t=(u,_)=>{let f=0,d=0,g=0;for(;;){const S=u.getUint8(_+g);if(f|=(S&127)<<d,(S&47513075712)===0)break;d+=7,g++}return f},n=l.slice(0,l.byteLength),s=new DataView(n);if(s.getUint32(0)!==6386541)return n;const o=4+4,a=t(s,o+1),c=o+a+2;return t(s,c+2),n}function O(l,e=8){return y.memory.buffer.slice(l,l+e)}function At(l,e){const i=e.byteLength,t=new DataView(y.memory.buffer,l,i),n=new DataView(e,0,i);let s=0;for(;s<i;){const r=i-s;r>=4?(t.setUint32(s,n.getUint32(s,!0),!0),s+=4):r>=2?(t.setUint16(s,n.getUint16(s,!0),!0),s+=4):t.setUint8(s,n.getUint8(s))}}function Xe(l){let e="",i=0,t=!1;for(;!t;){const n=new Uint8Array(O(l+i));i+=n.byteLength;for(let s=0;s<n.byteLength;s++){if(n[s]===0){t=!0;break}e+=String.fromCharCode(n[s])}}return e}function Bt(l,e,i){const t=new DataView(y.memory.buffer,l,i),n=new DataView(y.memory.buffer,e,i);for(let s=0;s<i;s++)t.setUint8(s,n.getUint8(s));return l}function xt(l,e,i){const t=new DataView(y.memory.buffer,l,i);for(let n=0;n<i;n++)t.setUint8(n,e);return l}function Ye(l){j(`${Xe(l)}`)}function It(l,e){e!==0&&(Ye(e),j("")),j(`${l.toString(16)}
`)}function Ot(){const l=y.runtime_instance.exports.malloc_get_dynamic_base(),e=new DataView(O(l,32));return{pages_max:e.getUint32(0,!0),pages_used:e.getUint32(4,!0),bitmap_base:e.getUint32(8,!0),size_base:e.getUint32(12,!0),current_index:e.getUint32(16,!0),dynamic_base:e.getUint32(20,!0),type_base:e.getUint32(24,!0)}}function ge(){return y}async function Mt(){y.runtime_imports.memset=xt,y.runtime_imports.log_string=Ye,y.runtime_imports.log_hex=It,y.runtime_imports.memcpy=Bt;const l=y.runtime_imports;y.memory=new WebAssembly.Memory({initial:10,maximum:10,shared:!0}),j(`allocated memory pool, size: 0x${y.memory.buffer.byteLength.toString(16)}
`);const e=await Be("wasm/runtime.wasm");y.runtime_instance=await WebAssembly.instantiate(e,{env:Y({memory:y.memory},l)});for(let r of Object.keys(y.runtime_instance.exports)){let o;r.startsWith("__imp_")?o=r.substring(6):o=r,y.runtime_exports[o]=y.runtime_instance.exports[r]}const i=await Be("wasm/interpreter.wasm");y.backend=new WebAssembly.Instance(i,{env:Y(Y({memory:y.memory},l),y.runtime_exports)}),j(`calling runtime_init
`);const t=y.runtime_instance.exports.runtime_init(),n=y.runtime_instance.exports.malloc_get_dynamic_base();j(`malloc start: ${n.toString(16)}
`),j(`runtime_init finished, result: 0x${t.toString(16)}
`),j(`backend type: ${Xe(y.backend.exports.backend_get_name())}
`),j(`calling backend_init
`);const s=y.backend.exports.backend_init();j(`backend_init finished, result: 0x${s.toString(16)}
`),window.ctx=y}function xe(l,e,i){const t=l.slice();return t[8]=e[i],t}function Ie(l,e,i){const t=l.slice();return t[11]=e[i],t}function Oe(l){let e,i=l[11].name+"",t,n,s=l[11].value+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s),k(e,"class","allocator-info-entry")},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[11].name+"")&&T(t,i),a&1&&s!==(s=o[11].value+"")&&T(r,s)},d(o){o&&w(e)}}}function Me(l){let e,i,t=l[2][l[1][l[8]].type]+"",n,s,r=parseInt(l[8]).toString(16)+"",o,a,c=l[1][l[8]].size.toString(16)+"",u,_,f=l[1][l[8]].at+"",d;return{c(){e=$("pre"),i=b("["),n=b(t),s=b("]	0x"),o=b(r),a=b("	 - 0x"),u=b(c),_=b("	@ "),d=b(f),k(e,"class","svelte-xenrtk")},m(g,S){v(g,e,S),m(e,i),m(e,n),m(e,s),m(e,o),m(e,a),m(e,u),m(e,_),m(e,d)},p(g,S){S&2&&t!==(t=g[2][g[1][g[8]].type]+"")&&T(n,t),S&2&&r!==(r=parseInt(g[8]).toString(16)+"")&&T(o,r),S&2&&c!==(c=g[1][g[8]].size.toString(16)+"")&&T(u,c),S&2&&f!==(f=g[1][g[8]].at+"")&&T(d,f)},d(g){g&&w(e)}}}function Et(l){let e,i=Object.keys(l[1]),t=[];for(let n=0;n<i.length;n+=1)t[n]=Me(xe(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=Q()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=Object.keys(n[1]);let r;for(r=0;r<i.length;r+=1){const o=xe(n,i,r);t[r]?t[r].p(o,s):(t[r]=Me(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Nt(l){let e,i,t,n,s=l[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=Oe(Ie(l,s,o));return t=new H({props:{title:"Allocations",$$slots:{default:[Et]},$$scope:{ctx:l}}}),{c(){e=$("div");for(let o=0;o<r.length;o+=1)r[o].c();i=L(),V(t.$$.fragment)},m(o,a){v(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);m(e,i),U(t,e,null),n=!0},p(o,[a]){if(a&1){s=o[0];let u;for(u=0;u<s.length;u+=1){const _=Ie(o,s,u);r[u]?r[u].p(_,a):(r[u]=Oe(_),r[u].c(),r[u].m(e,i))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}const c={};a&16386&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){h(t.$$.fragment,o),n=!1},d(o){o&&w(e),I(r,o),z(t)}}}function qt(l,e,i){let t=[{name:"Loading",value:"..."}],n={};const s={pages_max:"Max pages",pages_used:"Pages used",bitmap_base:"Bitmap",size_base:"Size Array",current_index:"Head",dynamic_base:"Dynamic Base",type_base:"Type Base"},r=u=>u.toString(16),o={pages_max:r,pages_used:r,bitmap_base:r,size_base:r,type_base:r,dynamic_base:r,current_index:r},a=["generic","runtime","page table","guest memory"],c=u=>{const _={},f=u.pages_max/8,d=new DataView(O(u.bitmap_base,f)),g=new DataView(O(u.size_base,u.pages_max*4)),S=new DataView(O(u.type_base,u.pages_max));let D=0;for(;D<u.pages_max&&D<256;)if(d.getUint8(Math.floor(D/8))&1<<D%8){const F=u.dynamic_base+D*4096,X=n.hasOwnProperty(F)?n[F].at:Math.floor(new Date().getTime()/1e3),P=g.getUint32(D*4,!0),G=S.getUint8(D);_[F]={at:X,size:P,type:G},D+=P>0?P:1}else D++;i(1,n=_)};return setInterval(()=>{const u=[],_=Ot();for(let f in _){const d=s[f];u.push({name:d,value:o[f](_[f])})}i(0,t=u),c(_)},500),[t,n,a]}class Ct extends x{constructor(e){super(),B(this,e,qt,Nt,A,{})}}function Ee(l,e,i){const t=l.slice();return t[1]=e[i],t}function Ne(l){let e,i=l[0].registers,t=[];for(let n=0;n<i.length;n+=1)t[n]=qe(Ee(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=Q()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&1){i=n[0].registers;let r;for(r=0;r<i.length;r+=1){const o=Ee(n,i,r);t[r]?t[r].p(o,s):(t[r]=qe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function qe(l){let e,i=l[1].name+"",t,n,s=l[1].value.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1].name+"")&&T(t,i),a&1&&s!==(s=o[1].value.toString(16)+"")&&T(r,s)},d(o){o&&w(e)}}}function Pt(l){let e,i=l[0]&&Ne(l);return{c(){e=$("div"),i&&i.c()},m(t,n){v(t,e,n),i&&i.m(e,null)},p(t,[n]){t[0]?i?i.p(t,n):(i=Ne(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:W,o:W,d(t){t&&w(e),i&&i.d()}}}function Wt(l,e,i){let{data:t}=e;return l.$$set=n=>{"data"in n&&i(0,t=n.data)},[t]}class Ht extends x{constructor(e){super(),B(this,e,Wt,Pt,A,{data:0})}}function Ft(l){let e,i,t,n,s,r;return s=new Qe({props:{content:l[1],defaultTab:l[2]}}),{c(){e=$("div"),i=b("core count: "),t=b(l[0]),n=L(),V(s.$$.fragment)},m(o,a){v(o,e,a),m(e,i),m(e,t),m(e,n),U(s,e,null),r=!0},p(o,[a]){(!r||a&1)&&T(t,o[0]);const c={};a&2&&(c.content=o[1]),a&4&&(c.defaultTab=o[2]),s.$set(c)},i(o){r||(p(s.$$.fragment,o),r=!0)},o(o){h(s.$$.fragment,o),r=!1},d(o){o&&w(e),z(s)}}}function Gt(l,e,i){let t=0,n=[],s="";const r=()=>{const o=ge();if(o.runtime_instance===null)return;const a=o.runtime_instance.exports.__imp_cpu_get_context(),c=8,u=new DataView(O(a,c));i(0,t=u.getUint8(0));const _=u.getUint32(4,!0),f=4,d=new DataView(O(_,f*t)),g=["rax","rbx","rcx","rdx","rdi","rsi","rbp","rsp","rip","rflags"],S=["es","cs","ss","ds","fs","gs"],D=[];for(let N=0;N<t;N++){const F=d.getUint32(N*f,!0),X=8+8+8+8+8+8+8+8+8+8+12,P=new DataView(O(F,X)),G={registers:[]};for(let K in g){const ie=g[K],re=P.getBigUint64(8*K,!0);G.registers.push({name:ie,value:re})}for(let K in S){const ie=S[K],re=P.getUint16(X-12+K*2,!0);G.registers.push({name:ie,value:re})}D.push({name:`Core ${N}`,component:Ht,data:G})}i(1,n=D),i(2,s=D[0].name)};return setInterval(r,500),r(),[t,n,s]}class Kt extends x{constructor(e){super(),B(this,e,Gt,Ft,A,{})}}function Ce(l,e,i){const t=l.slice();return t[4]=e[i],t}function Pe(l){let e,i=l[2](l[4])+"",t,n,s=l[4].child.toString(16)+"",r,o;return{c(){e=$("div"),t=b(i),n=b(" - "),r=b(s),o=L()},m(a,c){v(a,e,c),m(e,t),m(e,n),m(e,r),m(e,o)},p(a,c){c&2&&i!==(i=a[2](a[4])+"")&&T(t,i),c&2&&s!==(s=a[4].child.toString(16)+"")&&T(r,s)},d(a){a&&w(e)}}}function Rt(l){let e,i=l[1],t=[];for(let n=0;n<i.length;n+=1)t[n]=Pe(Ce(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=Q()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=n[1];let r;for(r=0;r<i.length;r+=1){const o=Ce(n,i,r);t[r]?t[r].p(o,s):(t[r]=Pe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Zt(l){let e,i;return e=new H({props:{title:l[0],$$slots:{default:[Rt]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&1&&(s.title=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function Jt(l,e,i){let{name:t=""}=e,{parents:n=[]}=e,{table:s=[]}=e;const r=o=>{const a=[o.index];let c=0;for(;o.parent!==null&&c<n.length;)o=n[c][o.parent],a.push(o.index),c++;return a.map(u=>u.toString(16)).join(" ")};return l.$$set=o=>{"name"in o&&i(0,t=o.name),"parents"in o&&i(3,n=o.parents),"table"in o&&i(1,s=o.table)},[t,s,r,n]}class oe extends x{constructor(e){super(),B(this,e,Jt,Zt,A,{name:0,parents:3,table:1})}}function We(l,e,i){const t=l.slice();return t[6]=e[i],t}function He(l){let e,i=l[1](l[6]).toString(16)+"",t,n,s=l[6].child.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(" > "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1](o[6]).toString(16)+"")&&T(t,i),a&1&&s!==(s=o[6].child.toString(16)+"")&&T(r,s)},d(o){o&&w(e)}}}function Qt(l){let e,i=l[0].p2,t=[];for(let n=0;n<i.length;n+=1)t[n]=He(We(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=Q()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&3){i=n[0].p2;let r;for(r=0;r<i.length;r+=1){const o=We(n,i,r);t[r]?t[r].p(o,s):(t[r]=He(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Xt(l){let e,i,t,n,s,r,o,a,c;return i=new oe({props:{name:"Level 0",table:l[0].p0}}),n=new oe({props:{name:"Level 1",table:l[0].p1,parents:[l[0].p0]}}),r=new oe({props:{name:"Level 2",table:l[0].p2,parents:[l[0].p1,l[0].p0]}}),a=new H({props:{title:"Address Space",$$slots:{default:[Qt]},$$scope:{ctx:l}}}),{c(){e=$("div"),V(i.$$.fragment),t=L(),V(n.$$.fragment),s=L(),V(r.$$.fragment),o=L(),V(a.$$.fragment)},m(u,_){v(u,e,_),U(i,e,null),m(e,t),U(n,e,null),m(e,s),U(r,e,null),m(e,o),U(a,e,null),c=!0},p(u,[_]){const f={};_&1&&(f.table=u[0].p0),i.$set(f);const d={};_&1&&(d.table=u[0].p1),_&1&&(d.parents=[u[0].p0]),n.$set(d);const g={};_&1&&(g.table=u[0].p2),_&1&&(g.parents=[u[0].p1,u[0].p0]),r.$set(g);const S={};_&513&&(S.$$scope={dirty:_,ctx:u}),a.$set(S)},i(u){c||(p(i.$$.fragment,u),p(n.$$.fragment,u),p(r.$$.fragment,u),p(a.$$.fragment,u),c=!0)},o(u){h(i.$$.fragment,u),h(n.$$.fragment,u),h(r.$$.fragment,u),h(a.$$.fragment,u),c=!1},d(u){u&&w(e),z(i),z(n),z(r),z(a)}}}const Fe=4;function Yt(l,e,i){let t={p0:[],p1:[],p2:[]},n;const s=["p0","p1","p2"],r=(c,u,_,f=null)=>{const d=new DataView(O(c,u*Fe));for(let g=0;g<u;g++){const S=d.getUint32(g*Fe,!0);if(S===0)continue;const D={index:g,child:S,parent:f},N=n[s[_]].push(D)-1;_<2&&r(S,512,_+1,N)}},o=ge();return setInterval(()=>{n={p0:[],p1:[],p2:[]},r(o.runtime_instance.exports.guest_memory_get_p0(),4,0),i(0,t=n)},500),[t,c=>{const u=c.index,_=t.p1[c.parent],f=_.index;return(t.p0[_.parent].index<<30)+(f<<21)+(u<<12)>>>0}]}class en extends x{constructor(e){super(),B(this,e,Yt,Xt,A,{})}}function tn(l){let e,i;return e=new Qe({props:{content:l[0],defaultTab:"CPU"}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p:W,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function nn(l){let e,i;return e=new H({props:{title:"Debugger",$$slots:{default:[tn]},$$scope:{ctx:l}}}),{c(){V(e.$$.fragment)},m(t,n){U(e,t,n),i=!0},p(t,[n]){const s={};n&2&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function ln(l){return[[{name:"Allocator",component:Ct},{name:"Guest Memory",component:en},{name:"CPU",component:Kt}]]}class rn extends x{constructor(e){super(),B(this,e,ln,nn,A,{})}}function sn(l){let e;return{c(){e=$("div"),k(e,"class","markdown")},m(i,t){v(i,e,t),e.innerHTML=Vt},p:W,d(i){i&&w(e)}}}function on(l){let e,i,t,n,s,r,o,a,c,u,_;return i=new Tt({props:{items:l[0]}}),s=new H({props:{title:"README",$$slots:{default:[sn]},$$scope:{ctx:l}}}),o=new yt({}),u=new rn({}),{c(){e=$("div"),V(i.$$.fragment),t=L(),n=$("div"),V(s.$$.fragment),r=L(),V(o.$$.fragment),a=L(),c=$("div"),V(u.$$.fragment),k(c,"class","instructions-container svelte-1p7s32z"),k(n,"class","content svelte-1p7s32z"),k(e,"class","container svelte-1p7s32z")},m(f,d){v(f,e,d),U(i,e,null),m(e,t),m(e,n),U(s,n,null),m(n,r),U(o,n,null),m(n,a),m(n,c),U(u,c,null),_=!0},p(f,[d]){const g={};d&8&&(g.$$scope={dirty:d,ctx:f}),s.$set(g)},i(f){_||(p(i.$$.fragment,f),p(s.$$.fragment,f),p(o.$$.fragment,f),p(u.$$.fragment,f),_=!0)},o(f){h(i.$$.fragment,f),h(s.$$.fragment,f),h(o.$$.fragment,f),h(u.$$.fragment,f),_=!1},d(f){f&&w(e),z(i),z(s),z(o),z(u)}}}function an(l){const e=(n=1)=>{document.body.style.zoom=`${n*100}%`},i=(n,...s)=>(...r)=>n(...s,...r);return[[{name:"View",children:[{name:"Zoom",children:[{name:"100%",click:i(e,1)},{name:"200%",click:i(e,2)},{name:"300%",click:i(e,3)},{name:"400%",click:i(e,4)}]}]}]]}class cn extends x{constructor(e){super(),B(this,e,an,on,A,{})}}const le={floppies:[]};async function un(l,e){j(`loading floppy: '${e}' into drive #${l}
`);const t=await(await fetch(e)).arrayBuffer();le.floppies[l]=t}function fn(l,e,i,t){const n=le.floppies[l];if(console.log(le),n===void 0)return;console.log(le);const s=ge();for(let c=1;c<i;c++)s.runtime_instance.exports.__imp_guest_memory_translate(t+512*c);const r=i*512,o=n.slice(e*512,e*512+r),a=s.runtime_instance.exports.__imp_guest_memory_translate(t);console.log(`copying sectors ${e}-${e+i} to (${t.toString(16)} > ${a.toString(16)})`),At(a,o)}const Ge=async(l,e)=>{j(`${e}...
`),await l,j(`${e} done
`)},_n=async()=>{new cn({target:document.body})},mn=async()=>{await Ge(_n(),"initializing frontend"),await Ge(Mt(),"initializing runtime & backend"),console.log("runtime exports:",ctx.runtime_exports);const l=540033104;await un(0,"floppies/x86BOOT.img"),fn(0,0,17,l),ctx.runtime_instance.exports.__imp_cpu_core_set_rip(0,BigInt(l)),window.doTest=()=>{const e=setInterval(()=>{const i=ctx.backend.exports.backend_tick(0)>>>0;i&2147483648&&(j(`encountered an error: ${i.toString(16)}`),clearInterval(e))},100)},j(`waiting for 3 sec, then starting backend
`),setTimeout(()=>doTest(),3e3)};window.addEventListener("load",mn);
