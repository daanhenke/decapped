var Ye=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable;var fe=(l,e,i)=>e in l?Ye(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,ne=(l,e)=>{for(var i in e||(e={}))Ze.call(e,i)&&fe(l,i,e[i]);if(ue)for(var i of ue(e))et.call(e,i)&&fe(l,i,e[i]);return l};const tt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};tt();function P(){}function nt(l,e){for(const i in e)l[i]=e[i];return l}function Pe(l){return l()}function _e(){return Object.create(null)}function K(l){l.forEach(Pe)}function We(l){return typeof l=="function"}function j(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function lt(l){return Object.keys(l).length===0}function it(l,e,i,t){if(l){const n=He(l,e,i,t);return l[0](n)}}function He(l,e,i,t){return l[1]&&t?nt(i.ctx.slice(),l[1](t(e))):i.ctx}function rt(l,e,i,t){if(l[2]&&t){const n=l[2](t(i));if(e.dirty===void 0)return n;if(typeof n=="object"){const s=[],r=Math.max(e.dirty.length,n.length);for(let o=0;o<r;o+=1)s[o]=e.dirty[o]|n[o];return s}return e.dirty|n}return e.dirty}function st(l,e,i,t,n,s){if(n){const r=He(e,i,t,s);l.p(r,n)}}function ot(l){if(l.ctx.length>32){const e=[],i=l.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function m(l,e){l.appendChild(e)}function v(l,e,i){l.insertBefore(e,i||null)}function w(l){l.parentNode.removeChild(l)}function I(l,e){for(let i=0;i<l.length;i+=1)l[i]&&l[i].d(e)}function $(l){return document.createElement(l)}function b(l){return document.createTextNode(l)}function V(){return b(" ")}function R(){return b("")}function Fe(l,e,i,t){return l.addEventListener(e,i,t),()=>l.removeEventListener(e,i,t)}function y(l,e,i){i==null?l.removeAttribute(e):l.getAttribute(e)!==i&&l.setAttribute(e,i)}function at(l){return Array.from(l.childNodes)}function T(l,e){e=""+e,l.wholeText!==e&&(l.data=e)}let ae;function G(l){ae=l}const F=[],re=[],Y=[],me=[],ct=Promise.resolve();let se=!1;function ut(){se||(se=!0,ct.then(Ge))}function oe(l){Y.push(l)}const le=new Set;let X=0;function Ge(){const l=ae;do{for(;X<F.length;){const e=F[X];X++,G(e),ft(e.$$)}for(G(null),F.length=0,X=0;re.length;)re.pop()();for(let e=0;e<Y.length;e+=1){const i=Y[e];le.has(i)||(le.add(i),i())}Y.length=0}while(F.length);for(;me.length;)me.pop()();se=!1,le.clear(),G(l)}function ft(l){if(l.fragment!==null){l.update(),K(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(oe)}}const Z=new Set;let q;function M(){q={r:0,c:[],p:q}}function E(){q.r||K(q.c),q=q.p}function p(l,e){l&&l.i&&(Z.delete(l),l.i(e))}function h(l,e,i,t){if(l&&l.o){if(Z.has(l))return;Z.add(l),q.c.push(()=>{Z.delete(l),t&&(i&&l.d(1),t())}),l.o(e)}}function L(l){l&&l.c()}function S(l,e,i,t){const{fragment:n,on_mount:s,on_destroy:r,after_update:o}=l.$$;n&&n.m(e,i),t||oe(()=>{const a=s.map(Pe).filter(We);r?r.push(...a):K(a),l.$$.on_mount=[]}),o.forEach(oe)}function U(l,e){const i=l.$$;i.fragment!==null&&(K(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function _t(l,e){l.$$.dirty[0]===-1&&(F.push(l),ut(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function x(l,e,i,t,n,s,r,o=[-1]){const a=ae;G(l);const c=l.$$={fragment:null,ctx:null,props:s,update:P,not_equal:n,bound:_e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:_e(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let u=!1;if(c.ctx=i?i(l,e.props||{},(_,f,...d)=>{const g=d.length?d[0]:f;return c.ctx&&n(c.ctx[_],c.ctx[_]=g)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](g),u&&_t(l,_)),f}):[],c.update(),u=!0,K(c.before_update),c.fragment=t?t(c.ctx):!1,e.target){if(e.hydrate){const _=at(e.target);c.fragment&&c.fragment.l(_),_.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&p(l.$$.fragment),S(l,e.target,e.anchor,e.customElement),Ge()}G(a)}class B{$destroy(){U(this,1),this.$destroy=P}$on(e,i){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(i),()=>{const n=t.indexOf(i);n!==-1&&t.splice(n,1)}}$set(e){this.$$set&&!lt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ge(l){let e,i;const t=l[5].default,n=it(t,l,l[4],null);return{c(){e=$("div"),n&&n.c(),y(e,"class","window-content svelte-1qojbbx")},m(s,r){v(s,e,r),n&&n.m(e,null),i=!0},p(s,r){n&&n.p&&(!i||r&16)&&st(n,t,s,s[4],i?rt(t,s[4],r,null):ot(s[4]),null)},i(s){i||(p(n,s),i=!0)},o(s){h(n,s),i=!1},d(s){s&&w(e),n&&n.d(s)}}}function mt(l){let e,i,t,n,s,r,o,a,c,u,_,f=!l[2]&&ge(l);return{c(){e=$("div"),i=$("div"),t=$("div"),n=b(l[0]),s=V(),r=$("div"),r.innerHTML=`<span>-</span> 
            <span>x</span>`,o=V(),f&&f.c(),y(r,"class","window-icons svelte-1qojbbx"),y(i,"class","window-titlebar svelte-1qojbbx"),y(e,"class",a="window "+(l[1]?"window-grow":"")+" svelte-1qojbbx")},m(d,g){v(d,e,g),m(e,i),m(i,t),m(t,n),m(i,s),m(i,r),m(e,o),f&&f.m(e,null),c=!0,u||(_=Fe(i,"click",l[3]),u=!0)},p(d,[g]){(!c||g&1)&&T(n,d[0]),d[2]?f&&(M(),h(f,1,1,()=>{f=null}),E()):f?(f.p(d,g),g&4&&p(f,1)):(f=ge(d),f.c(),p(f,1),f.m(e,null)),(!c||g&2&&a!==(a="window "+(d[1]?"window-grow":"")+" svelte-1qojbbx"))&&y(e,"class",a)},i(d){c||(p(f),c=!0)},o(d){h(f),c=!1},d(d){d&&w(e),f&&f.d(),u=!1,_()}}}function gt(l,e,i){let{$$slots:t={},$$scope:n}=e,{title:s=""}=e,{grow:r=!1}=e,o=!1;const a=()=>{i(2,o=!o)};return l.$$set=c=>{"title"in c&&i(0,s=c.title),"grow"in c&&i(1,r=c.grow),"$$scope"in c&&i(4,n=c.$$scope)},[s,r,o,a,n,t]}class W extends B{constructor(e){super(),x(this,e,gt,mt,j,{title:0,grow:1})}}const N={messages:[""],callbacks:[]};function D(l){const e=l.split(`
`);for(let i in e){const t=e[i];N.messages[N.messages.length-1]+=t,i<e.length-1&&N.messages.push("")}for(let i of N.callbacks)i(N)}function pt(){return N}function dt(l){N.callbacks.push(l)}function pe(l,e,i){const t=l.slice();return t[4]=e[i],t}function de(l){let e,i=l[4]+"",t,n;return{c(){e=$("div"),t=b(i),n=V(),y(e,"class","log-message svelte-1f4e2ec")},m(s,r){v(s,e,r),m(e,t),m(e,n)},p(s,r){r&1&&i!==(i=s[4]+"")&&T(t,i)},d(s){s&&w(e)}}}function ht(l){let e,i=l[0],t=[];for(let n=0;n<i.length;n+=1)t[n]=de(pe(l,i,n));return{c(){e=$("div");for(let n=0;n<t.length;n+=1)t[n].c();y(e,"class","log-container svelte-1f4e2ec")},m(n,s){v(n,e,s);for(let r=0;r<t.length;r+=1)t[r].m(e,null);l[2](e)},p(n,s){if(s&1){i=n[0];let r;for(r=0;r<i.length;r+=1){const o=pe(n,i,r);t[r]?t[r].p(o,s):(t[r]=de(o),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){n&&w(e),I(t,n),l[2](null)}}}function bt(l){let e,i;return e=new W({props:{grow:!0,title:"Internal Logs",$$slots:{default:[ht]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p(t,[n]){const s={};n&131&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function $t(l,e,i){let t=[""],n=null;const s=o=>{i(0,t=o.messages)};s(pt()),dt(s);function r(o){re[o?"unshift":"push"](()=>{n=o,i(1,n)})}return[t,n,r]}class wt extends B{constructor(e){super(),x(this,e,$t,bt,j,{})}}function he(l,e,i){const t=l.slice();return t[2]=e[i],t}function be(l){let e,i,t,n=l[1],s=[];for(let o=0;o<n.length;o+=1)s[o]=$e(he(l,n,o));const r=o=>h(s[o],1,1,()=>{s[o]=null});return{c(){e=b(`>\r
        `),i=$("div");for(let o=0;o<s.length;o+=1)s[o].c();y(i,"class","topbar-subitem-children svelte-13m7anm")},m(o,a){v(o,e,a),v(o,i,a);for(let c=0;c<s.length;c+=1)s[c].m(i,null);t=!0},p(o,a){if(a&2){n=o[1];let c;for(c=0;c<n.length;c+=1){const u=he(o,n,c);s[c]?(s[c].p(u,a),p(s[c],1)):(s[c]=$e(u),s[c].c(),p(s[c],1),s[c].m(i,null))}for(M(),c=n.length;c<s.length;c+=1)r(c);E()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)p(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)h(s[a]);t=!1},d(o){o&&w(e),o&&w(i),I(s,o)}}}function $e(l){let e,i;return e=new Ke({props:{name:l[2].name,children:l[2].children}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p(t,n){const s={};n&2&&(s.name=t[2].name),n&2&&(s.children=t[2].children),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function vt(l){let e,i,t,n,s=l[1].length&&be(l);return{c(){e=$("div"),i=b(l[0]),t=V(),s&&s.c(),y(e,"class","topbar-subitem svelte-13m7anm")},m(r,o){v(r,e,o),m(e,i),m(e,t),s&&s.m(e,null),n=!0},p(r,[o]){(!n||o&1)&&T(i,r[0]),r[1].length?s?(s.p(r,o),o&2&&p(s,1)):(s=be(r),s.c(),p(s,1),s.m(e,null)):s&&(M(),h(s,1,1,()=>{s=null}),E())},i(r){n||(p(s),n=!0)},o(r){h(s),n=!1},d(r){r&&w(e),s&&s.d()}}}function yt(l,e,i){let{name:t=""}=e,{children:n=[]}=e;return l.$$set=s=>{"name"in s&&i(0,t=s.name),"children"in s&&i(1,n=s.children)},[t,n]}class Ke extends B{constructor(e){super(),x(this,e,yt,vt,j,{name:0,children:1})}}function we(l,e,i){const t=l.slice();return t[1]=e[i],t}function ve(l,e,i){const t=l.slice();return t[4]=e[i],t}function ye(l){let e,i,t=l[1].children,n=[];for(let r=0;r<t.length;r+=1)n[r]=ke(ve(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","topbar-item-children svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,o){if(o&1){t=r[1].children;let a;for(a=0;a<t.length;a+=1){const c=ve(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=ke(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(M(),a=t.length;a<n.length;a+=1)s(a);E()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function ke(l){let e,i;return e=new Ke({props:{name:l[4].name,children:l[4].children}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p(t,n){const s={};n&1&&(s.name=t[4].name),n&1&&(s.children=t[4].children),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Se(l){let e,i,t=l[1].name+"",n,s,r,o,a=l[1].children&&ye(l);return{c(){e=$("div"),i=$("div"),n=b(t),s=V(),a&&a.c(),r=V(),y(i,"class","topbar-item-name svelte-kh5whn"),y(e,"class","topbar-item svelte-kh5whn")},m(c,u){v(c,e,u),m(e,i),m(i,n),m(e,s),a&&a.m(e,null),m(e,r),o=!0},p(c,u){(!o||u&1)&&t!==(t=c[1].name+"")&&T(n,t),c[1].children?a?(a.p(c,u),u&1&&p(a,1)):(a=ye(c),a.c(),p(a,1),a.m(e,r)):a&&(M(),h(a,1,1,()=>{a=null}),E())},i(c){o||(p(a),o=!0)},o(c){h(a),o=!1},d(c){c&&w(e),a&&a.d()}}}function kt(l){let e,i,t=l[0],n=[];for(let r=0;r<t.length;r+=1)n[r]=Se(we(l,t,r));const s=r=>h(n[r],1,1,()=>{n[r]=null});return{c(){e=$("div");for(let r=0;r<n.length;r+=1)n[r].c();y(e,"class","topbar svelte-kh5whn")},m(r,o){v(r,e,o);for(let a=0;a<n.length;a+=1)n[a].m(e,null);i=!0},p(r,[o]){if(o&1){t=r[0];let a;for(a=0;a<t.length;a+=1){const c=we(r,t,a);n[a]?(n[a].p(c,o),p(n[a],1)):(n[a]=Se(c),n[a].c(),p(n[a],1),n[a].m(e,null))}for(M(),a=t.length;a<n.length;a+=1)s(a);E()}},i(r){if(!i){for(let o=0;o<t.length;o+=1)p(n[o]);i=!0}},o(r){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)h(n[o]);i=!1},d(r){r&&w(e),I(n,r)}}}function St(l,e,i){let{items:t=[]}=e;return l.$$set=n=>{"items"in n&&i(0,t=n.items)},[t]}class Ut extends B{constructor(e){super(),x(this,e,St,kt,j,{items:0})}}const zt=`<h1>What is decapped?</h1>
<p>Decapped is an x86 emulator capable of emulating a small part of real mode (the old 16 bit instruction set).<br>
It's still early in development but can already run a couple of instructions.</p>
<p>Our current target is getting FreeDOS to boot!</p>
`;function Ue(l,e,i){const t=l.slice();return t[5]=e[i],t}function ze(l){let e,i=l[5].name+"",t,n,s,r,o;return{c(){e=$("div"),t=b(i),n=V(),y(e,"class",s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,t),m(e,n),r||(o=Fe(e,"click",function(){We(l[2].bind(this,l[5].name))&&l[2].bind(this,l[5].name).apply(this,arguments)}),r=!0)},p(a,c){l=a,c&1&&i!==(i=l[5].name+"")&&T(t,i),c&3&&s!==(s="tabbar-item "+(l[1]!==null&&l[0][l[1]].name===l[5].name?"active":"")+" svelte-1ujyfaq")&&y(e,"class",s)},d(a){a&&w(e),r=!1,o()}}}function Te(l){let e,i,t;var n=l[0][l[1]].component;function s(r){return{props:{data:r[0][r[1]].data}}}return n&&(e=new n(s(l))),{c(){e&&L(e.$$.fragment),i=R()},m(r,o){e&&S(e,r,o),v(r,i,o),t=!0},p(r,o){const a={};if(o&3&&(a.data=r[0][r[1]].data),n!==(n=r[0][r[1]].component)){if(e){M();const c=e;h(c.$$.fragment,1,0,()=>{U(c,1)}),E()}n?(e=new n(s(r)),L(e.$$.fragment),p(e.$$.fragment,1),S(e,i.parentNode,i)):e=null}else n&&e.$set(a)},i(r){t||(e&&p(e.$$.fragment,r),t=!0)},o(r){e&&h(e.$$.fragment,r),t=!1},d(r){r&&w(i),e&&U(e,r)}}}function Tt(l){let e,i,t,n,s=l[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=ze(Ue(l,s,a));let o=l[1]!==null&&Te(l);return{c(){e=$("div"),i=$("div");for(let a=0;a<r.length;a+=1)r[a].c();t=V(),o&&o.c(),y(i,"class","tabbar-items svelte-1ujyfaq"),y(e,"class","tabbar svelte-1ujyfaq")},m(a,c){v(a,e,c),m(e,i);for(let u=0;u<r.length;u+=1)r[u].m(i,null);m(e,t),o&&o.m(e,null),n=!0},p(a,[c]){if(c&7){s=a[0];let u;for(u=0;u<s.length;u+=1){const _=Ue(a,s,u);r[u]?r[u].p(_,c):(r[u]=ze(_),r[u].c(),r[u].m(i,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}a[1]!==null?o?(o.p(a,c),c&2&&p(o,1)):(o=Te(a),o.c(),p(o,1),o.m(e,null)):o&&(M(),h(o,1,1,()=>{o=null}),E())},i(a){n||(p(o),n=!0)},o(a){h(o),n=!1},d(a){a&&w(e),I(r,a),o&&o.d()}}}function Lt(l,e,i){let{content:t=[]}=e,{defaultTab:n=""}=e,s=null;if(n!==""){for(let a in t)if(t[a].name===n){s=a;break}s===null&&(n="")}const r=a=>s!==null&&t[s].name===a,o=a=>{if(r(a))i(1,s=null);else for(let c in t)if(t[c].name===a){i(1,s=c);break}};return l.$$set=a=>{"content"in a&&i(0,t=a.content),"defaultTab"in a&&i(3,n=a.defaultTab)},[t,s,o,n]}class Re extends B{constructor(e){super(),x(this,e,Lt,Tt,j,{content:0,defaultTab:3})}}const z={memory:null,runtime_imports:{},runtime_instance:null,interpreter:null};async function Le(l){const e=await fetch(l),i=Vt(await e.arrayBuffer(),1,2);return await WebAssembly.compile(i)}function Vt(l,e=1,i=1){const t=(u,_)=>{let f=0,d=0,g=0;for(;;){const k=u.getUint8(_+g);if(f|=(k&127)<<d,(k&47513075712)===0)break;d+=7,g++}return f},n=l.slice(0,l.byteLength),s=new DataView(n);if(s.getUint32(0)!==6386541)return n;const o=4+4,a=t(s,o+1),c=o+a+2;return t(s,c+2),n}function O(l,e=8){return z.memory.buffer.slice(l,l+e)}function At(l,e){const i=e.byteLength,t=new DataView(z.memory.buffer,l,i),n=new DataView(e,0,i);let s=0;for(;s<i;){const r=i-s;r>=4?(t.setUint32(s,n.getUint32(s,!0),!0),s+=4):r>=2?(t.setUint16(s,n.getUint16(s,!0),!0),s+=4):t.setUint8(s,n.getUint8(s))}}function Dt(l){let e="",i=0,t=!1;for(;!t;){const n=new Uint8Array(O(l+i));i+=n.byteLength;for(let s=0;s<n.byteLength;s++){if(n[s]===0){t=!0;break}e+=String.fromCharCode(n[s])}}return e}function jt(l,e,i){const t=new DataView(O(l,i));for(let n=0;n<i;n++)t.setUint8(n,e);return l}function Je(l){D(`runtime: ${Dt(l)}`)}function xt(l,e){e!==0&&(Je(e),D("")),D(`${l.toString(16)}
`)}function Bt(){const l=z.runtime_instance.exports.malloc_get_dynamic_base(),e=new DataView(O(l,32));return{pages_max:e.getUint32(0,!0),pages_used:e.getUint32(4,!0),bitmap_base:e.getUint32(8,!0),size_base:e.getUint32(12,!0),current_index:e.getUint32(16,!0),dynamic_base:e.getUint32(20,!0),type_base:e.getUint32(24,!0)}}function ce(){return z}async function Ot(){z.runtime_imports.memset=jt,z.runtime_imports.log_string=Je,z.runtime_imports.log_hex=xt;const l=z.runtime_imports;z.memory=new WebAssembly.Memory({initial:10,maximum:10,shared:!0}),D(`allocated memory pool, size: 0x${z.memory.buffer.byteLength.toString(16)}
`);const e=await Le("wasm/runtime.wasm");z.runtime_instance=new WebAssembly.Instance(e,{env:ne({memory:z.memory},l)});const i=await Le("wasm/interpreter.wasm");z.interpreter=new WebAssembly.Instance(i,{env:ne({memory:z.memory},l)}),D(`calling runtime_init
`);const t=z.runtime_instance.exports.runtime_init(),n=z.runtime_instance.exports.malloc_get_dynamic_base();D(`malloc start: ${n.toString(16)}
`),D(`runtime_init finished, result: 0x${t.toString(16)}
`),D(`calling interpreter_init
`);const s=z.interpreter.exports.interpreter_init();D(`interpreter_init finished, result: 0x${s.toString(16)}
`),window.ctx=z}function Ve(l,e,i){const t=l.slice();return t[8]=e[i],t}function Ae(l,e,i){const t=l.slice();return t[11]=e[i],t}function De(l){let e,i=l[11].name+"",t,n,s=l[11].value+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s),y(e,"class","allocator-info-entry")},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[11].name+"")&&T(t,i),a&1&&s!==(s=o[11].value+"")&&T(r,s)},d(o){o&&w(e)}}}function je(l){let e,i,t=l[2][l[1][l[8]].type]+"",n,s,r=parseInt(l[8]).toString(16)+"",o,a,c=l[1][l[8]].size.toString(16)+"",u,_,f=l[1][l[8]].at+"",d;return{c(){e=$("pre"),i=b("["),n=b(t),s=b("]	0x"),o=b(r),a=b("	 - 0x"),u=b(c),_=b("	@ "),d=b(f),y(e,"class","svelte-xenrtk")},m(g,k){v(g,e,k),m(e,i),m(e,n),m(e,s),m(e,o),m(e,a),m(e,u),m(e,_),m(e,d)},p(g,k){k&2&&t!==(t=g[2][g[1][g[8]].type]+"")&&T(n,t),k&2&&r!==(r=parseInt(g[8]).toString(16)+"")&&T(o,r),k&2&&c!==(c=g[1][g[8]].size.toString(16)+"")&&T(u,c),k&2&&f!==(f=g[1][g[8]].at+"")&&T(d,f)},d(g){g&&w(e)}}}function It(l){let e,i=Object.keys(l[1]),t=[];for(let n=0;n<i.length;n+=1)t[n]=je(Ve(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=Object.keys(n[1]);let r;for(r=0;r<i.length;r+=1){const o=Ve(n,i,r);t[r]?t[r].p(o,s):(t[r]=je(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Mt(l){let e,i,t,n,s=l[0],r=[];for(let o=0;o<s.length;o+=1)r[o]=De(Ae(l,s,o));return t=new W({props:{title:"Allocations",$$slots:{default:[It]},$$scope:{ctx:l}}}),{c(){e=$("div");for(let o=0;o<r.length;o+=1)r[o].c();i=V(),L(t.$$.fragment)},m(o,a){v(o,e,a);for(let c=0;c<r.length;c+=1)r[c].m(e,null);m(e,i),S(t,e,null),n=!0},p(o,[a]){if(a&1){s=o[0];let u;for(u=0;u<s.length;u+=1){const _=Ae(o,s,u);r[u]?r[u].p(_,a):(r[u]=De(_),r[u].c(),r[u].m(e,i))}for(;u<r.length;u+=1)r[u].d(1);r.length=s.length}const c={};a&16386&&(c.$$scope={dirty:a,ctx:o}),t.$set(c)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){h(t.$$.fragment,o),n=!1},d(o){o&&w(e),I(r,o),U(t)}}}function Et(l,e,i){let t=[{name:"Loading",value:"..."}],n={};const s={pages_max:"Max pages",pages_used:"Pages used",bitmap_base:"Bitmap",size_base:"Size Array",current_index:"Head",dynamic_base:"Dynamic Base",type_base:"Type Base"},r=u=>u.toString(16),o={pages_max:r,pages_used:r,bitmap_base:r,size_base:r,type_base:r,dynamic_base:r,current_index:r},a=["generic","runtime","page table","guest memory"],c=u=>{const _={},f=u.pages_max/8,d=new DataView(O(u.bitmap_base,f)),g=new DataView(O(u.size_base,u.pages_max*4)),k=new DataView(O(u.type_base,u.pages_max));let A=0;for(;A<u.pages_max&&A<256;)if(d.getUint8(Math.floor(A/8))&1<<A%8){const H=u.dynamic_base+A*4096,te=n.hasOwnProperty(H)?n[H].at:Math.floor(new Date().getTime()/1e3),C=g.getUint32(A*4,!0),Q=k.getUint8(A);_[H]={at:te,size:C,type:Q},A+=C>0?C:1}else A++;i(1,n=_)};return setInterval(()=>{const u=[],_=Bt();for(let f in _){const d=s[f];u.push({name:d,value:o[f](_[f])})}i(0,t=u),c(_)},500),[t,n,a]}class Nt extends B{constructor(e){super(),x(this,e,Et,Mt,j,{})}}function xe(l,e,i){const t=l.slice();return t[1]=e[i],t}function Be(l){let e,i=l[0].registers,t=[];for(let n=0;n<i.length;n+=1)t[n]=Oe(xe(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&1){i=n[0].registers;let r;for(r=0;r<i.length;r+=1){const o=xe(n,i,r);t[r]?t[r].p(o,s):(t[r]=Oe(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Oe(l){let e,i=l[1].name+"",t,n,s=l[1].value.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(": "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1].name+"")&&T(t,i),a&1&&s!==(s=o[1].value.toString(16)+"")&&T(r,s)},d(o){o&&w(e)}}}function qt(l){let e,i=l[0]&&Be(l);return{c(){e=$("div"),i&&i.c()},m(t,n){v(t,e,n),i&&i.m(e,null)},p(t,[n]){t[0]?i?i.p(t,n):(i=Be(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i:P,o:P,d(t){t&&w(e),i&&i.d()}}}function Ct(l,e,i){let{data:t}=e;return l.$$set=n=>{"data"in n&&i(0,t=n.data)},[t]}class Pt extends B{constructor(e){super(),x(this,e,Ct,qt,j,{data:0})}}function Wt(l){let e,i,t,n,s,r;return s=new Re({props:{content:l[1],defaultTab:l[2]}}),{c(){e=$("div"),i=b("core count: "),t=b(l[0]),n=V(),L(s.$$.fragment)},m(o,a){v(o,e,a),m(e,i),m(e,t),m(e,n),S(s,e,null),r=!0},p(o,[a]){(!r||a&1)&&T(t,o[0]);const c={};a&2&&(c.content=o[1]),a&4&&(c.defaultTab=o[2]),s.$set(c)},i(o){r||(p(s.$$.fragment,o),r=!0)},o(o){h(s.$$.fragment,o),r=!1},d(o){o&&w(e),U(s)}}}function Ht(l,e,i){let t=0,n=[],s="";const r=()=>{const o=ce();if(o.runtime_instance===null)return;const a=o.runtime_instance.exports.__imp_cpu_get_context(),c=8,u=new DataView(O(a,c));i(0,t=u.getUint8(0));const _=u.getUint32(4,!0),f=4,d=new DataView(O(_,f*t)),g=["rax","rbx","rcx","rdx","rdi","rsi","rbp","rsp","rip","rflags"],k=[];for(let A=0;A<t;A++){const J=d.getUint32(A*f,!0),H=8+8+8+8+8+8+8+8+8+8,te=new DataView(O(J,H)),C={registers:[]};for(let Q in g){const Qe=g[Q],Xe=te.getBigUint64(8*Q,!0);C.registers.push({name:Qe,value:Xe})}k.push({name:`Core ${A}`,component:Pt,data:C})}i(1,n=k),i(2,s=k[0].name)};return setInterval(r,500),r(),[t,n,s]}class Ft extends B{constructor(e){super(),x(this,e,Ht,Wt,j,{})}}function Ie(l,e,i){const t=l.slice();return t[4]=e[i],t}function Me(l){let e,i=l[2](l[4])+"",t,n,s=l[4].child.toString(16)+"",r,o;return{c(){e=$("div"),t=b(i),n=b(" - "),r=b(s),o=V()},m(a,c){v(a,e,c),m(e,t),m(e,n),m(e,r),m(e,o)},p(a,c){c&2&&i!==(i=a[2](a[4])+"")&&T(t,i),c&2&&s!==(s=a[4].child.toString(16)+"")&&T(r,s)},d(a){a&&w(e)}}}function Gt(l){let e,i=l[1],t=[];for(let n=0;n<i.length;n+=1)t[n]=Me(Ie(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&6){i=n[1];let r;for(r=0;r<i.length;r+=1){const o=Ie(n,i,r);t[r]?t[r].p(o,s):(t[r]=Me(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Kt(l){let e,i;return e=new W({props:{title:l[0],$$slots:{default:[Gt]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p(t,[n]){const s={};n&1&&(s.title=t[0]),n&130&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function Rt(l,e,i){let{name:t=""}=e,{parents:n=[]}=e,{table:s=[]}=e;const r=o=>{const a=[o.index];let c=0;for(;o.parent!==null&&c<n.length;)o=n[c][o.parent],a.push(o.index),c++;return a.map(u=>u.toString(16)).join(" ")};return l.$$set=o=>{"name"in o&&i(0,t=o.name),"parents"in o&&i(3,n=o.parents),"table"in o&&i(1,s=o.table)},[t,s,r,n]}class ie extends B{constructor(e){super(),x(this,e,Rt,Kt,j,{name:0,parents:3,table:1})}}function Ee(l,e,i){const t=l.slice();return t[6]=e[i],t}function Ne(l){let e,i=l[1](l[6]).toString(16)+"",t,n,s=l[6].child.toString(16)+"",r;return{c(){e=$("div"),t=b(i),n=b(" > "),r=b(s)},m(o,a){v(o,e,a),m(e,t),m(e,n),m(e,r)},p(o,a){a&1&&i!==(i=o[1](o[6]).toString(16)+"")&&T(t,i),a&1&&s!==(s=o[6].child.toString(16)+"")&&T(r,s)},d(o){o&&w(e)}}}function Jt(l){let e,i=l[0].p2,t=[];for(let n=0;n<i.length;n+=1)t[n]=Ne(Ee(l,i,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},m(n,s){for(let r=0;r<t.length;r+=1)t[r].m(n,s);v(n,e,s)},p(n,s){if(s&3){i=n[0].p2;let r;for(r=0;r<i.length;r+=1){const o=Ee(n,i,r);t[r]?t[r].p(o,s):(t[r]=Ne(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=i.length}},d(n){I(t,n),n&&w(e)}}}function Qt(l){let e,i,t,n,s,r,o,a,c;return i=new ie({props:{name:"Level 0",table:l[0].p0}}),n=new ie({props:{name:"Level 1",table:l[0].p1,parents:[l[0].p0]}}),r=new ie({props:{name:"Level 2",table:l[0].p2,parents:[l[0].p1,l[0].p0]}}),a=new W({props:{title:"Address Space",$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){e=$("div"),L(i.$$.fragment),t=V(),L(n.$$.fragment),s=V(),L(r.$$.fragment),o=V(),L(a.$$.fragment)},m(u,_){v(u,e,_),S(i,e,null),m(e,t),S(n,e,null),m(e,s),S(r,e,null),m(e,o),S(a,e,null),c=!0},p(u,[_]){const f={};_&1&&(f.table=u[0].p0),i.$set(f);const d={};_&1&&(d.table=u[0].p1),_&1&&(d.parents=[u[0].p0]),n.$set(d);const g={};_&1&&(g.table=u[0].p2),_&1&&(g.parents=[u[0].p1,u[0].p0]),r.$set(g);const k={};_&513&&(k.$$scope={dirty:_,ctx:u}),a.$set(k)},i(u){c||(p(i.$$.fragment,u),p(n.$$.fragment,u),p(r.$$.fragment,u),p(a.$$.fragment,u),c=!0)},o(u){h(i.$$.fragment,u),h(n.$$.fragment,u),h(r.$$.fragment,u),h(a.$$.fragment,u),c=!1},d(u){u&&w(e),U(i),U(n),U(r),U(a)}}}const qe=4;function Xt(l,e,i){let t={p0:[],p1:[],p2:[]},n;const s=["p0","p1","p2"],r=(c,u,_,f=null)=>{const d=new DataView(O(c,u*qe));for(let g=0;g<u;g++){const k=d.getUint32(g*qe,!0);if(k===0)continue;const A={index:g,child:k,parent:f},J=n[s[_]].push(A)-1;_<2&&r(k,512,_+1,J)}},o=ce();return setInterval(()=>{n={p0:[],p1:[],p2:[]},r(o.runtime_instance.exports.guest_memory_get_p0(),4,0),i(0,t=n)},500),[t,c=>{const u=c.index,_=t.p1[c.parent],f=_.index;return(t.p0[_.parent].index<<30)+(f<<21)+(u<<12)>>>0}]}class Yt extends B{constructor(e){super(),x(this,e,Xt,Qt,j,{})}}function Zt(l){let e,i;return e=new Re({props:{content:l[0],defaultTab:"CPU"}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p:P,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function en(l){let e,i;return e=new W({props:{title:"Debugger",$$slots:{default:[Zt]},$$scope:{ctx:l}}}),{c(){L(e.$$.fragment)},m(t,n){S(e,t,n),i=!0},p(t,[n]){const s={};n&2&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){h(e.$$.fragment,t),i=!1},d(t){U(e,t)}}}function tn(l){return[[{name:"Allocator",component:Nt},{name:"Guest Memory",component:Yt},{name:"CPU",component:Ft}]]}class nn extends B{constructor(e){super(),x(this,e,tn,en,j,{})}}function ln(l){let e;return{c(){e=$("div"),y(e,"class","markdown")},m(i,t){v(i,e,t),e.innerHTML=zt},p:P,d(i){i&&w(e)}}}function rn(l){let e,i,t,n,s,r,o,a,c,u,_;return i=new Ut({props:{items:l[0]}}),s=new W({props:{title:"README",$$slots:{default:[ln]},$$scope:{ctx:l}}}),o=new wt({}),u=new nn({}),{c(){e=$("div"),L(i.$$.fragment),t=V(),n=$("div"),L(s.$$.fragment),r=V(),L(o.$$.fragment),a=V(),c=$("div"),L(u.$$.fragment),y(c,"class","instructions-container svelte-1p7s32z"),y(n,"class","content svelte-1p7s32z"),y(e,"class","container svelte-1p7s32z")},m(f,d){v(f,e,d),S(i,e,null),m(e,t),m(e,n),S(s,n,null),m(n,r),S(o,n,null),m(n,a),m(n,c),S(u,c,null),_=!0},p(f,[d]){const g={};d&2&&(g.$$scope={dirty:d,ctx:f}),s.$set(g)},i(f){_||(p(i.$$.fragment,f),p(s.$$.fragment,f),p(o.$$.fragment,f),p(u.$$.fragment,f),_=!0)},o(f){h(i.$$.fragment,f),h(s.$$.fragment,f),h(o.$$.fragment,f),h(u.$$.fragment,f),_=!1},d(f){f&&w(e),U(i),U(s),U(o),U(u)}}}function sn(l){return[[{name:"Hello",children:[{name:"World",children:[{name:"Test",children:[{name:"Test 2"},{name:"Test 3"}]}]}]},{name:"World"}]]}class on extends B{constructor(e){super(),x(this,e,sn,rn,j,{})}}const ee={floppies:[]};async function an(l,e){D(`loading floppy: '${e}' into drive #${l}
`);const t=await(await fetch(e)).arrayBuffer();ee.floppies[l]=t}function cn(l,e,i,t){const n=ee.floppies[l];if(console.log(ee),n===void 0)return;console.log(ee);const s=ce();for(let c=1;c<i;c++)s.runtime_instance.exports.__imp_guest_memory_translate(t+512*c);const r=i*512,o=n.slice(e*512,e*512+r),a=s.runtime_instance.exports.__imp_guest_memory_translate(t);console.log(`copying sectors ${e}-${e+i} to (${t.toString(16)} > ${a.toString(16)})`),At(a,o)}const Ce=async(l,e)=>{D(`${e}...
`),await l,D(`${e} done
`)},un=async()=>{new on({target:document.body})},fn=async()=>{await Ce(un(),"initializing frontend"),await Ce(Ot(),"initializing runtime & backend"),console.log("runtime exports:",ctx.runtime_instance.exports);const l=540033104;await an(0,"floppies/x86BOOT.img"),cn(0,0,17,l),ctx.runtime_instance.exports.__imp_cpu_core_set_rip(0,BigInt(l)),ctx.runtime_instance.exports.__imp_disassemble_current_instruction(0)};window.addEventListener("load",fn);
